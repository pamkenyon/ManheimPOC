require('source-map-support').install();

'use strict';

var _extends = require('babel-runtime/helpers/extends')['default'];

var _defineProperty = require('babel-runtime/helpers/define-property')['default'];

var _regeneratorRuntime = require('babel-runtime/regenerator')['default'];

var _getIterator = require('babel-runtime/core-js/get-iterator')['default'];

var _interopRequireDefault = require('babel-runtime/helpers/interop-require-default')['default'];

var _2 = require('../..');

var _fakeDriver = require('./fake-driver');

var _lodash = require('lodash');

var _lodash2 = _interopRequireDefault(_lodash);

var _requestPromise = require('request-promise');

var _requestPromise2 = _interopRequireDefault(_requestPromise);

var _chai = require('chai');

var _chai2 = _interopRequireDefault(_chai);

var _chaiAsPromised = require('chai-as-promised');

var _chaiAsPromised2 = _interopRequireDefault(_chaiAsPromised);

var _sinon = require('sinon');

var _sinon2 = _interopRequireDefault(_sinon);

var _httpStatusCodes = require('http-status-codes');

var _httpStatusCodes2 = _interopRequireDefault(_httpStatusCodes);

var _helpers = require('./helpers');

var _libProtocolProtocol = require('../../lib/protocol/protocol');

var should = _chai2['default'].should();
_chai2['default'].use(_chaiAsPromised2['default']);

var serverPort = 8181;
var baseUrl = 'http://localhost:' + serverPort + '/wd/hub';

describe('Protocol', function callee$0$0() {
  return _regeneratorRuntime.async(function callee$0$0$(context$1$0) {
    while (1) switch (context$1$0.prev = context$1$0.next) {
      case 0:

        //TODO: more tests!:
        // Unknown commands should return 404

        describe('direct to driver', function () {
          var d = new _fakeDriver.FakeDriver();
          it('should return response values directly from the driver', function callee$2$0() {
            return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
              while (1) switch (context$3$0.prev = context$3$0.next) {
                case 0:
                  context$3$0.next = 2;
                  return _regeneratorRuntime.awrap(d.setUrl("http://google.com"));

                case 2:
                  context$3$0.sent.should.contain("google");

                case 3:
                case 'end':
                  return context$3$0.stop();
              }
            }, null, this);
          });
        });

        describe('via express router', function () {
          var mjsonwpServer = undefined;
          var driver = undefined;

          before(function callee$2$0() {
            return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
              while (1) switch (context$3$0.prev = context$3$0.next) {
                case 0:
                  driver = new _fakeDriver.FakeDriver();
                  driver.sessionId = 'foo';
                  context$3$0.next = 4;
                  return _regeneratorRuntime.awrap((0, _2.server)((0, _2.routeConfiguringFunction)(driver), serverPort));

                case 4:
                  mjsonwpServer = context$3$0.sent;

                case 5:
                case 'end':
                  return context$3$0.stop();
              }
            }, null, this);
          });

          after(function callee$2$0() {
            return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
              while (1) switch (context$3$0.prev = context$3$0.next) {
                case 0:
                  context$3$0.next = 2;
                  return _regeneratorRuntime.awrap(mjsonwpServer.close());

                case 2:
                case 'end':
                  return context$3$0.stop();
              }
            }, null, this);
          });

          it('should proxy to driver and return valid jsonwp response', function callee$2$0() {
            var res;
            return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
              while (1) switch (context$3$0.prev = context$3$0.next) {
                case 0:
                  context$3$0.next = 2;
                  return _regeneratorRuntime.awrap((0, _requestPromise2['default'])({
                    url: baseUrl + '/session/foo/url',
                    method: 'POST',
                    json: { url: 'http://google.com' }
                  }));

                case 2:
                  res = context$3$0.sent;

                  res.should.eql({
                    status: 0,
                    value: "Navigated to: http://google.com",
                    sessionId: "foo"
                  });

                case 4:
                case 'end':
                  return context$3$0.stop();
              }
            }, null, this);
          });

          it('should assume requests without a Content-Type are json requests', function callee$2$0() {
            var res;
            return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
              while (1) switch (context$3$0.prev = context$3$0.next) {
                case 0:
                  context$3$0.next = 2;
                  return _regeneratorRuntime.awrap((0, _requestPromise2['default'])({
                    url: baseUrl + '/session/foo/url',
                    method: 'POST',
                    body: JSON.stringify({ url: 'http://google.com' })
                  }));

                case 2:
                  res = context$3$0.sent;

                  JSON.parse(res).should.eql({
                    status: 0,
                    value: "Navigated to: http://google.com",
                    sessionId: "foo"
                  });

                case 4:
                case 'end':
                  return context$3$0.stop();
              }
            }, null, this);
          });

          it('should respond to x-www-form-urlencoded as well as json requests', function callee$2$0() {
            var res;
            return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
              while (1) switch (context$3$0.prev = context$3$0.next) {
                case 0:
                  context$3$0.next = 2;
                  return _regeneratorRuntime.awrap((0, _requestPromise2['default'])({
                    url: baseUrl + '/session/foo/url',
                    method: 'POST',
                    form: { url: 'http://google.com' }
                  }));

                case 2:
                  res = context$3$0.sent;

                  JSON.parse(res).should.eql({
                    status: 0,
                    value: "Navigated to: http://google.com",
                    sessionId: "foo"
                  });

                case 4:
                case 'end':
                  return context$3$0.stop();
              }
            }, null, this);
          });

          it('should include url request parameters for methods to use - sessionid', function callee$2$0() {
            var res;
            return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
              while (1) switch (context$3$0.prev = context$3$0.next) {
                case 0:
                  context$3$0.next = 2;
                  return _regeneratorRuntime.awrap((0, _requestPromise2['default'])({
                    url: baseUrl + '/session/foo/back',
                    method: 'POST',
                    json: {},
                    simple: false,
                    resolveWithFullResponse: true
                  }));

                case 2:
                  res = context$3$0.sent;

                  res.body.should.eql({
                    status: 0,
                    value: "foo",
                    sessionId: "foo"
                  });

                case 4:
                case 'end':
                  return context$3$0.stop();
              }
            }, null, this);
          });

          it('should include url request parameters for methods to use - elementid', function callee$2$0() {
            var res;
            return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
              while (1) switch (context$3$0.prev = context$3$0.next) {
                case 0:
                  context$3$0.next = 2;
                  return _regeneratorRuntime.awrap((0, _requestPromise2['default'])({
                    url: baseUrl + '/session/foo/element/bar/click',
                    method: 'POST',
                    json: {}
                  }));

                case 2:
                  res = context$3$0.sent;

                  res.status.should.equal(0);
                  res.value.should.eql(["bar", "foo"]);

                case 5:
                case 'end':
                  return context$3$0.stop();
              }
            }, null, this);
          });

          it('should include url req params in the order: custom, element, session', function callee$2$0() {
            var res;
            return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
              while (1) switch (context$3$0.prev = context$3$0.next) {
                case 0:
                  context$3$0.next = 2;
                  return _regeneratorRuntime.awrap((0, _requestPromise2['default'])({
                    url: baseUrl + '/session/foo/element/bar/attribute/baz',
                    method: 'GET',
                    json: {}
                  }));

                case 2:
                  res = context$3$0.sent;

                  res.status.should.equal(0);
                  res.value.should.eql(["baz", "bar", "foo"]);

                case 5:
                case 'end':
                  return context$3$0.stop();
              }
            }, null, this);
          });

          it('should respond with 400 Bad Request if parameters missing', function callee$2$0() {
            var res;
            return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
              while (1) switch (context$3$0.prev = context$3$0.next) {
                case 0:
                  context$3$0.next = 2;
                  return _regeneratorRuntime.awrap((0, _requestPromise2['default'])({
                    url: baseUrl + '/session/foo/url',
                    method: 'POST',
                    json: {},
                    resolveWithFullResponse: true,
                    simple: false
                  }));

                case 2:
                  res = context$3$0.sent;

                  res.statusCode.should.equal(400);
                  res.body.should.contain("url");

                case 5:
                case 'end':
                  return context$3$0.stop();
              }
            }, null, this);
          });

          it('should reject requests with a badly formatted body and not crash', function callee$2$0() {
            var res;
            return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
              while (1) switch (context$3$0.prev = context$3$0.next) {
                case 0:
                  context$3$0.next = 2;
                  return _regeneratorRuntime.awrap((0, _requestPromise2['default'])({
                    url: baseUrl + '/session/foo/url',
                    method: 'POST',
                    json: "oh hello"
                  }).should.eventually.be.rejected);

                case 2:
                  context$3$0.next = 4;
                  return _regeneratorRuntime.awrap((0, _requestPromise2['default'])({
                    url: baseUrl + '/session/foo/url',
                    method: 'POST',
                    json: { url: 'http://google.com' }
                  }));

                case 4:
                  res = context$3$0.sent;

                  res.should.eql({
                    status: 0,
                    value: "Navigated to: http://google.com",
                    sessionId: "foo"
                  });

                case 6:
                case 'end':
                  return context$3$0.stop();
              }
            }, null, this);
          });

          it('should get 404 for bad routes', function callee$2$0() {
            return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
              while (1) switch (context$3$0.prev = context$3$0.next) {
                case 0:
                  context$3$0.next = 2;
                  return _regeneratorRuntime.awrap((0, _requestPromise2['default'])({
                    url: baseUrl + '/blargimarg',
                    method: 'GET'
                  }).should.eventually.be.rejectedWith("404"));

                case 2:
                case 'end':
                  return context$3$0.stop();
              }
            }, null, this);
          });

          // TODO pass this test
          // https://github.com/appium/node-mobile-json-wire-protocol/issues/3
          it('4xx responses should have content-type of text/plain', function callee$2$0() {
            var res;
            return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
              while (1) switch (context$3$0.prev = context$3$0.next) {
                case 0:
                  context$3$0.next = 2;
                  return _regeneratorRuntime.awrap((0, _requestPromise2['default'])({
                    url: baseUrl + '/blargimargarita',
                    method: 'GET',
                    resolveWithFullResponse: true,
                    simple: false // 404 errors fulfill the promise, rather than rejecting
                  }));

                case 2:
                  res = context$3$0.sent;

                  res.headers['content-type'].should.include('text/plain');

                case 4:
                case 'end':
                  return context$3$0.stop();
              }
            }, null, this);
          });

          it('should throw not yet implemented for unfilledout commands', function callee$2$0() {
            var res;
            return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
              while (1) switch (context$3$0.prev = context$3$0.next) {
                case 0:
                  context$3$0.next = 2;
                  return _regeneratorRuntime.awrap((0, _requestPromise2['default'])({
                    url: baseUrl + '/session/foo/element/bar/location',
                    method: 'GET',
                    json: true,
                    resolveWithFullResponse: true,
                    simple: false
                  }));

                case 2:
                  res = context$3$0.sent;

                  res.statusCode.should.equal(501);
                  res.body.should.eql({
                    status: 13,
                    value: {
                      message: 'Method has not yet been implemented'
                    },
                    sessionId: 'foo'
                  });

                case 5:
                case 'end':
                  return context$3$0.stop();
              }
            }, null, this);
          });

          it('should throw not implemented for ignored commands', function callee$2$0() {
            var res;
            return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
              while (1) switch (context$3$0.prev = context$3$0.next) {
                case 0:
                  context$3$0.next = 2;
                  return _regeneratorRuntime.awrap((0, _requestPromise2['default'])({
                    url: baseUrl + '/session/foo/buttonup',
                    method: 'POST',
                    json: {},
                    resolveWithFullResponse: true,
                    simple: false
                  }));

                case 2:
                  res = context$3$0.sent;

                  res.statusCode.should.equal(501);
                  res.body.should.eql({
                    status: 13,
                    value: {
                      message: 'Method is not implemented'
                    },
                    sessionId: 'foo'
                  });

                case 5:
                case 'end':
                  return context$3$0.stop();
              }
            }, null, this);
          });

          it('should get 400 for bad parameters', function callee$2$0() {
            return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
              while (1) switch (context$3$0.prev = context$3$0.next) {
                case 0:
                  context$3$0.next = 2;
                  return _regeneratorRuntime.awrap((0, _requestPromise2['default'])({
                    url: baseUrl + '/session/foo/url',
                    method: 'POST',
                    json: {}
                  }).should.eventually.be.rejectedWith("400"));

                case 2:
                case 'end':
                  return context$3$0.stop();
              }
            }, null, this);
          });

          it('should ignore special extra payload params in the right contexts', function callee$2$0() {
            return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
              while (1) switch (context$3$0.prev = context$3$0.next) {
                case 0:
                  context$3$0.next = 2;
                  return _regeneratorRuntime.awrap((0, _requestPromise2['default'])({
                    url: baseUrl + '/session/foo/element/bar/value',
                    method: 'POST',
                    json: { id: 'baz', sessionId: 'lol', value: ['a'] }
                  }));

                case 2:
                  context$3$0.next = 4;
                  return _regeneratorRuntime.awrap((0, _requestPromise2['default'])({
                    url: baseUrl + '/session/foo/element/bar/value',
                    method: 'POST',
                    json: { id: 'baz' }
                  }).should.eventually.be.rejectedWith("400"));

                case 4:
                  context$3$0.next = 6;
                  return _regeneratorRuntime.awrap((0, _requestPromise2['default'])({
                    url: baseUrl + '/session/foo/frame',
                    method: 'POST',
                    json: { id: 'baz' }
                  }));

                case 6:
                case 'end':
                  return context$3$0.stop();
              }
            }, null, this);
          });

          it('should return the correct error even if driver does not throw', function callee$2$0() {
            var res;
            return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
              while (1) switch (context$3$0.prev = context$3$0.next) {
                case 0:
                  context$3$0.next = 2;
                  return _regeneratorRuntime.awrap((0, _requestPromise2['default'])({
                    url: baseUrl + '/session/foo/appium/receive_async_response',
                    method: 'POST',
                    json: { response: 'baz' },
                    resolveWithFullResponse: true,
                    simple: false
                  }));

                case 2:
                  res = context$3$0.sent;

                  res.statusCode.should.equal(500);
                  res.body.should.eql({
                    status: 13,
                    value: {
                      message: 'An unknown server-side error occurred while processing ' + 'the command. Original error: Mishandled Driver Error'
                    },
                    sessionId: "foo"
                  });

                case 5:
                case 'end':
                  return context$3$0.stop();
              }
            }, null, this);
          });

          describe('w3c sendkeys migration', function () {
            it('should accept value for sendkeys', function callee$3$0() {
              var res;
              return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
                while (1) switch (context$4$0.prev = context$4$0.next) {
                  case 0:
                    context$4$0.next = 2;
                    return _regeneratorRuntime.awrap((0, _requestPromise2['default'])({
                      url: baseUrl + '/session/foo/element/bar/value',
                      method: 'POST',
                      json: { value: "text to type" }
                    }));

                  case 2:
                    res = context$4$0.sent;

                    res.status.should.equal(0);
                    res.value.should.eql(["text to type", "bar"]);

                  case 5:
                  case 'end':
                    return context$4$0.stop();
                }
              }, null, this);
            });
            it('should accept text for sendkeys', function callee$3$0() {
              var res;
              return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
                while (1) switch (context$4$0.prev = context$4$0.next) {
                  case 0:
                    context$4$0.next = 2;
                    return _regeneratorRuntime.awrap((0, _requestPromise2['default'])({
                      url: baseUrl + '/session/foo/element/bar/value',
                      method: 'POST',
                      json: { text: "text to type" }
                    }));

                  case 2:
                    res = context$4$0.sent;

                    res.status.should.equal(0);
                    res.value.should.eql(["text to type", "bar"]);

                  case 5:
                  case 'end':
                    return context$4$0.stop();
                }
              }, null, this);
            });
            it('should accept value and text for sendkeys, and use value', function callee$3$0() {
              var res;
              return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
                while (1) switch (context$4$0.prev = context$4$0.next) {
                  case 0:
                    context$4$0.next = 2;
                    return _regeneratorRuntime.awrap((0, _requestPromise2['default'])({
                      url: baseUrl + '/session/foo/element/bar/value',
                      method: 'POST',
                      json: { value: "text to type", text: "text to ignore" }
                    }));

                  case 2:
                    res = context$4$0.sent;

                    res.status.should.equal(0);
                    res.value.should.eql(["text to type", "bar"]);

                  case 5:
                  case 'end':
                    return context$4$0.stop();
                }
              }, null, this);
            });
          });

          describe('multiple sets of arguments', function () {
            describe('optional', function () {
              it('should allow moveto with element', function callee$4$0() {
                var res;
                return _regeneratorRuntime.async(function callee$4$0$(context$5$0) {
                  while (1) switch (context$5$0.prev = context$5$0.next) {
                    case 0:
                      context$5$0.next = 2;
                      return _regeneratorRuntime.awrap((0, _requestPromise2['default'])({
                        url: baseUrl + '/session/foo/moveto',
                        method: 'POST',
                        json: { element: '3' }
                      }));

                    case 2:
                      res = context$5$0.sent;

                      res.status.should.equal(0);
                      res.value.should.eql(['3', null, null]);

                    case 5:
                    case 'end':
                      return context$5$0.stop();
                  }
                }, null, this);
              });
              it('should allow moveto with xoffset/yoffset', function callee$4$0() {
                var res;
                return _regeneratorRuntime.async(function callee$4$0$(context$5$0) {
                  while (1) switch (context$5$0.prev = context$5$0.next) {
                    case 0:
                      context$5$0.next = 2;
                      return _regeneratorRuntime.awrap((0, _requestPromise2['default'])({
                        url: baseUrl + '/session/foo/moveto',
                        method: 'POST',
                        json: { xoffset: 42, yoffset: 17 }
                      }));

                    case 2:
                      res = context$5$0.sent;

                      res.status.should.equal(0);
                      res.value.should.eql([null, 42, 17]);

                    case 5:
                    case 'end':
                      return context$5$0.stop();
                  }
                }, null, this);
              });
            });
            describe('required', function () {
              it('should allow removeApp with appId', function callee$4$0() {
                var res;
                return _regeneratorRuntime.async(function callee$4$0$(context$5$0) {
                  while (1) switch (context$5$0.prev = context$5$0.next) {
                    case 0:
                      context$5$0.next = 2;
                      return _regeneratorRuntime.awrap((0, _requestPromise2['default'])({
                        url: baseUrl + '/session/foo/appium/device/remove_app',
                        method: 'POST',
                        json: { appId: 42 }
                      }));

                    case 2:
                      res = context$5$0.sent;

                      res.status.should.equal(0);
                      res.value.should.eql(42);

                    case 5:
                    case 'end':
                      return context$5$0.stop();
                  }
                }, null, this);
              });
              it('should allow removeApp with bundleId', function callee$4$0() {
                var res;
                return _regeneratorRuntime.async(function callee$4$0$(context$5$0) {
                  while (1) switch (context$5$0.prev = context$5$0.next) {
                    case 0:
                      context$5$0.next = 2;
                      return _regeneratorRuntime.awrap((0, _requestPromise2['default'])({
                        url: baseUrl + '/session/foo/appium/device/remove_app',
                        method: 'POST',
                        json: { bundleId: 42 }
                      }));

                    case 2:
                      res = context$5$0.sent;

                      res.status.should.equal(0);
                      res.value.should.eql(42);

                    case 5:
                    case 'end':
                      return context$5$0.stop();
                  }
                }, null, this);
              });
            });
          });

          describe('default param wrap', function () {
            it('should wrap', function callee$3$0() {
              var res;
              return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
                while (1) switch (context$4$0.prev = context$4$0.next) {
                  case 0:
                    context$4$0.next = 2;
                    return _regeneratorRuntime.awrap((0, _requestPromise2['default'])({
                      url: baseUrl + '/session/foo/touch/perform',
                      method: 'POST',
                      json: [{ "action": "tap", "options": { "element": "3" } }]
                    }));

                  case 2:
                    res = context$4$0.sent;

                    res.value.should.deep.equal([[{ "action": "tap", "options": { "element": "3" } }], 'foo']);

                  case 4:
                  case 'end':
                    return context$4$0.stop();
                }
              }, null, this);
            });

            it('should not wrap twice', function callee$3$0() {
              var res;
              return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
                while (1) switch (context$4$0.prev = context$4$0.next) {
                  case 0:
                    context$4$0.next = 2;
                    return _regeneratorRuntime.awrap((0, _requestPromise2['default'])({
                      url: baseUrl + '/session/foo/touch/perform',
                      method: 'POST',
                      json: { actions: [{ "action": "tap", "options": { "element": "3" } }] }
                    }));

                  case 2:
                    res = context$4$0.sent;

                    res.value.should.deep.equal([[{ "action": "tap", "options": { "element": "3" } }], 'foo']);

                  case 4:
                  case 'end':
                    return context$4$0.stop();
                }
              }, null, this);
            });
          });

          describe('create sessions via HTTP endpoint', function () {
            var desiredCapabilities = { a: 'b' };
            var requiredCapabilities = { c: 'd' };
            var capabilities = { e: 'f' };

            var sessionId = undefined;

            beforeEach(function () {
              sessionId = null;
            });
            afterEach(function callee$3$0() {
              return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
                while (1) switch (context$4$0.prev = context$4$0.next) {
                  case 0:
                    if (!sessionId) {
                      context$4$0.next = 3;
                      break;
                    }

                    context$4$0.next = 3;
                    return _regeneratorRuntime.awrap(_requestPromise2['default']['delete'](baseUrl + '/session/' + sessionId));

                  case 3:
                  case 'end':
                    return context$4$0.stop();
                }
              }, null, this);
            });

            it('should allow create session with desired caps (MJSONWP)', function callee$3$0() {
              var res;
              return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
                while (1) switch (context$4$0.prev = context$4$0.next) {
                  case 0:
                    context$4$0.next = 2;
                    return _regeneratorRuntime.awrap((0, _requestPromise2['default'])({
                      url: baseUrl + '/session',
                      method: 'POST',
                      json: { desiredCapabilities: desiredCapabilities }
                    }));

                  case 2:
                    res = context$4$0.sent;

                    sessionId = res.sessionId;

                    res.status.should.equal(0);
                    res.value.should.eql(desiredCapabilities);

                  case 6:
                  case 'end':
                    return context$4$0.stop();
                }
              }, null, this);
            });
            it('should allow create session with desired and required caps', function callee$3$0() {
              var res;
              return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
                while (1) switch (context$4$0.prev = context$4$0.next) {
                  case 0:
                    context$4$0.next = 2;
                    return _regeneratorRuntime.awrap((0, _requestPromise2['default'])({
                      url: baseUrl + '/session',
                      method: 'POST',
                      json: {
                        desiredCapabilities: desiredCapabilities,
                        requiredCapabilities: requiredCapabilities
                      }
                    }));

                  case 2:
                    res = context$4$0.sent;

                    sessionId = res.sessionId;

                    res.status.should.equal(0);
                    res.value.should.eql(_lodash2['default'].extend({}, desiredCapabilities, requiredCapabilities));

                  case 6:
                  case 'end':
                    return context$4$0.stop();
                }
              }, null, this);
            });
            it('should fail to create session without capabilities or desiredCapabilities', function callee$3$0() {
              return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
                while (1) switch (context$4$0.prev = context$4$0.next) {
                  case 0:
                    context$4$0.next = 2;
                    return _regeneratorRuntime.awrap((0, _requestPromise2['default'])({
                      url: baseUrl + '/session',
                      method: 'POST',
                      json: {}
                    }).should.eventually.be.rejectedWith('400'));

                  case 2:
                  case 'end':
                    return context$4$0.stop();
                }
              }, null, this);
            });
            it('should allow create session with capabilities (W3C)', function callee$3$0() {
              var res;
              return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
                while (1) switch (context$4$0.prev = context$4$0.next) {
                  case 0:
                    context$4$0.next = 2;
                    return _regeneratorRuntime.awrap((0, _requestPromise2['default'])({
                      url: baseUrl + '/session',
                      method: 'POST',
                      json: {
                        capabilities: capabilities
                      }
                    }));

                  case 2:
                    res = context$4$0.sent;

                    sessionId = res.sessionId;

                    should.not.exist(res.status);
                    should.not.exist(res.sessionId);
                    res.value.capabilities.should.eql(capabilities);
                    res.value.sessionId.should.exist;

                  case 8:
                  case 'end':
                    return context$4$0.stop();
                }
              }, null, this);
            });
            it('should fall back to MJSONWP if driver does not support W3C yet', function callee$3$0() {
              var createSessionStub, caps, res;
              return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
                while (1) switch (context$4$0.prev = context$4$0.next) {
                  case 0:
                    createSessionStub = _sinon2['default'].stub(driver, 'createSession').callsFake(function (capabilities) {
                      driver.sessionId = null;
                      return _2.BaseDriver.prototype.createSession.call(driver, capabilities);
                    });
                    caps = _extends({}, desiredCapabilities, {
                      platformName: 'Fake',
                      deviceName: 'Fake'
                    });
                    context$4$0.next = 4;
                    return _regeneratorRuntime.awrap((0, _requestPromise2['default'])({
                      url: baseUrl + '/session',
                      method: 'POST',
                      json: {
                        desiredCapabilities: caps,
                        capabilities: {
                          alwaysMatch: caps,
                          firstMatch: [{}]
                        }
                      }
                    }));

                  case 4:
                    res = context$4$0.sent;

                    sessionId = res.sessionId;

                    should.exist(res.status);
                    should.exist(res.sessionId);
                    res.value.should.eql(caps);
                    createSessionStub.restore();

                  case 10:
                  case 'end':
                    return context$4$0.stop();
                }
              }, null, this);
            });

            describe('w3c endpoints', function callee$3$0() {
              var w3cCaps, sessionUrl;
              return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
                while (1) switch (context$4$0.prev = context$4$0.next) {
                  case 0:
                    w3cCaps = {
                      alwaysMatch: {
                        platformName: 'Fake',
                        deviceName: 'Commodore 64'
                      },
                      firstMatch: [{}]
                    };
                    sessionUrl = undefined;

                    beforeEach(function callee$4$0() {
                      var _ref3,
                      // Start a session
                      value;

                      return _regeneratorRuntime.async(function callee$4$0$(context$5$0) {
                        while (1) switch (context$5$0.prev = context$5$0.next) {
                          case 0:
                            context$5$0.next = 2;
                            return _regeneratorRuntime.awrap(_requestPromise2['default'].post(baseUrl + '/session', {
                              json: {
                                capabilities: w3cCaps
                              }
                            }));

                          case 2:
                            _ref3 = context$5$0.sent;
                            value = _ref3.value;

                            sessionId = value.sessionId;
                            sessionUrl = baseUrl + '/session/' + sessionId;

                          case 6:
                          case 'end':
                            return context$5$0.stop();
                        }
                      }, null, this);
                    });

                    it('should throw 400 Bad Parameters exception if the parameters are bad', function callee$4$0() {
                      var _ref4, statusCode, error, _error$value, w3cError, message, stacktrace;

                      return _regeneratorRuntime.async(function callee$4$0$(context$5$0) {
                        while (1) switch (context$5$0.prev = context$5$0.next) {
                          case 0:
                            context$5$0.next = 2;
                            return _regeneratorRuntime.awrap(_requestPromise2['default'].post(sessionUrl + '/actions', {
                              json: {
                                bad: 'params'
                              }
                            }).should.eventually.be.rejected);

                          case 2:
                            _ref4 = context$5$0.sent;
                            statusCode = _ref4.statusCode;
                            error = _ref4.error;

                            statusCode.should.equal(400);

                            _error$value = error.value;
                            w3cError = _error$value.error;
                            message = _error$value.message;
                            stacktrace = _error$value.stacktrace;

                            message.should.match(/Parameters were incorrect/);
                            stacktrace.should.match(/protocol.js/);
                            w3cError.should.be.a.string;
                            w3cError.should.equal(_2.errors.InvalidArgumentError.error());

                          case 14:
                          case 'end':
                            return context$5$0.stop();
                        }
                      }, null, this);
                    });

                    it('should throw 404 Not Found exception if the command hasn\'t been implemented yet', function callee$4$0() {
                      var _ref5, statusCode, error, _error$value2, w3cError, message, stacktrace;

                      return _regeneratorRuntime.async(function callee$4$0$(context$5$0) {
                        while (1) switch (context$5$0.prev = context$5$0.next) {
                          case 0:
                            context$5$0.next = 2;
                            return _regeneratorRuntime.awrap(_requestPromise2['default'].post(sessionUrl + '/actions', {
                              json: {
                                actions: []
                              }
                            }).should.eventually.be.rejected);

                          case 2:
                            _ref5 = context$5$0.sent;
                            statusCode = _ref5.statusCode;
                            error = _ref5.error;

                            statusCode.should.equal(404);

                            _error$value2 = error.value;
                            w3cError = _error$value2.error;
                            message = _error$value2.message;
                            stacktrace = _error$value2.stacktrace;

                            message.should.match(/Method has not yet been implemented/);
                            stacktrace.should.match(/protocol.js/);
                            w3cError.should.be.a.string;
                            w3cError.should.equal(_2.errors.NotYetImplementedError.error());
                            message.should.match(/Method has not yet been implemented/);

                          case 15:
                          case 'end':
                            return context$5$0.stop();
                        }
                      }, null, this);
                    });

                    it('should throw 500 Unknown Error if the command throws an unexpected exception', function callee$4$0() {
                      var _ref6, statusCode, error, _error$value3, w3cError, message, stacktrace;

                      return _regeneratorRuntime.async(function callee$4$0$(context$5$0) {
                        while (1) switch (context$5$0.prev = context$5$0.next) {
                          case 0:
                            driver.performActions = function () {
                              throw new Error('Didn\'t work');
                            };
                            context$5$0.next = 3;
                            return _regeneratorRuntime.awrap(_requestPromise2['default'].post(sessionUrl + '/actions', {
                              json: {
                                actions: []
                              }
                            }).should.eventually.be.rejected);

                          case 3:
                            _ref6 = context$5$0.sent;
                            statusCode = _ref6.statusCode;
                            error = _ref6.error;

                            statusCode.should.equal(500);

                            _error$value3 = error.value;
                            w3cError = _error$value3.error;
                            message = _error$value3.message;
                            stacktrace = _error$value3.stacktrace;

                            stacktrace.should.match(/protocol.js/);
                            w3cError.should.be.a.string;
                            w3cError.should.equal(_2.errors.UnknownError.error());
                            message.should.match(/Didn't work/);

                            delete driver.performActions;

                          case 16:
                          case 'end':
                            return context$5$0.stop();
                        }
                      }, null, this);
                    });

                    it('should translate element format from MJSONWP to W3C', function callee$4$0() {
                      var _something, _something2;

                      var retValue, expectedValue, findElementsBackup, _ref7, value;

                      return _regeneratorRuntime.async(function callee$4$0$(context$5$0) {
                        while (1) switch (context$5$0.prev = context$5$0.next) {
                          case 0:
                            retValue = [{
                              something: (_something = {}, _defineProperty(_something, _libProtocolProtocol.MJSONWP_ELEMENT_KEY, 'fooo'), _defineProperty(_something, 'other', 'bar'), _something)
                            }, _defineProperty({}, _libProtocolProtocol.MJSONWP_ELEMENT_KEY, 'bar'), 'ignore'];
                            expectedValue = [{
                              something: (_something2 = {}, _defineProperty(_something2, _libProtocolProtocol.W3C_ELEMENT_KEY, 'fooo'), _defineProperty(_something2, 'other', 'bar'), _something2)
                            }, _defineProperty({}, _libProtocolProtocol.W3C_ELEMENT_KEY, 'bar'), 'ignore'];
                            findElementsBackup = driver.findElements;

                            driver.findElements = function () {
                              return retValue;
                            };
                            context$5$0.next = 6;
                            return _regeneratorRuntime.awrap(_requestPromise2['default'].post(sessionUrl + '/elements', {
                              json: {
                                using: 'whatever',
                                value: 'whatever'
                              }
                            }));

                          case 6:
                            _ref7 = context$5$0.sent;
                            value = _ref7.value;

                            value.should.deep.equal(expectedValue);
                            driver.findElements = findElementsBackup;

                          case 10:
                          case 'end':
                            return context$5$0.stop();
                        }
                      }, null, this);
                    });

                    it('should fail with a 408 error if it throws a TimeoutError exception', function callee$4$0() {
                      var setUrlStub, _ref8, statusCode, error, _error$value4, w3cError, message, stacktrace;

                      return _regeneratorRuntime.async(function callee$4$0$(context$5$0) {
                        while (1) switch (context$5$0.prev = context$5$0.next) {
                          case 0:
                            setUrlStub = _sinon2['default'].stub(driver, 'setUrl').callsFake(function () {
                              throw new _2.errors.TimeoutError();
                            });
                            context$5$0.next = 3;
                            return _regeneratorRuntime.awrap((0, _requestPromise2['default'])({
                              url: sessionUrl + '/url',
                              method: 'POST',
                              json: {
                                url: 'https://example.com/'
                              }
                            }).should.eventually.be.rejected);

                          case 3:
                            _ref8 = context$5$0.sent;
                            statusCode = _ref8.statusCode;
                            error = _ref8.error;

                            statusCode.should.equal(408);

                            _error$value4 = error.value;
                            w3cError = _error$value4.error;
                            message = _error$value4.message;
                            stacktrace = _error$value4.stacktrace;

                            stacktrace.should.match(/protocol.js/);
                            w3cError.should.be.a.string;
                            w3cError.should.equal(_2.errors.TimeoutError.error());
                            message.should.match(/An operation did not complete before its timeout expired/);

                            setUrlStub.restore();

                          case 16:
                          case 'end':
                            return context$5$0.stop();
                        }
                      }, null, this);
                    });

                    it('should pass with 200 HTTP status code if the command returns a value', function callee$4$0() {
                      var _ref9, status, value, sessionId;

                      return _regeneratorRuntime.async(function callee$4$0$(context$5$0) {
                        while (1) switch (context$5$0.prev = context$5$0.next) {
                          case 0:
                            driver.performActions = function (actions) {
                              return 'It works ' + actions.join('');
                            };
                            context$5$0.next = 3;
                            return _regeneratorRuntime.awrap(_requestPromise2['default'].post(sessionUrl + '/actions', {
                              json: {
                                actions: ['a', 'b', 'c']
                              }
                            }));

                          case 3:
                            _ref9 = context$5$0.sent;
                            status = _ref9.status;
                            value = _ref9.value;
                            sessionId = _ref9.sessionId;

                            should.not.exist(sessionId);
                            should.not.exist(status);
                            value.should.equal('It works abc');
                            delete driver.performActions;

                          case 11:
                          case 'end':
                            return context$5$0.stop();
                        }
                      }, null, this);
                    });

                    describe('jwproxy', function () {
                      var port = 56562;
                      var server = undefined,
                          jwproxy = undefined,
                          app = undefined;

                      beforeEach(function () {
                        var _this = this;

                        var res = (0, _helpers.createProxyServer)(sessionId, port);
                        server = res.server;
                        app = res.app;
                        jwproxy = new _2.JWProxy({ host: 'localhost', port: port });
                        jwproxy.sessionId = sessionId;
                        driver.performActions = function callee$6$0(actions) {
                          return _regeneratorRuntime.async(function callee$6$0$(context$7$0) {
                            while (1) switch (context$7$0.prev = context$7$0.next) {
                              case 0:
                                context$7$0.next = 2;
                                return _regeneratorRuntime.awrap(jwproxy.command('/perform-actions', 'POST', actions));

                              case 2:
                                return context$7$0.abrupt('return', context$7$0.sent);

                              case 3:
                              case 'end':
                                return context$7$0.stop();
                            }
                          }, null, _this);
                        };
                      });

                      afterEach(function callee$5$0() {
                        return _regeneratorRuntime.async(function callee$5$0$(context$6$0) {
                          while (1) switch (context$6$0.prev = context$6$0.next) {
                            case 0:
                              delete driver.performActions;
                              context$6$0.next = 3;
                              return _regeneratorRuntime.awrap(server.close());

                            case 3:
                            case 'end':
                              return context$6$0.stop();
                          }
                        }, null, this);
                      });

                      it('should work if a proxied request returns a response with status 200', function callee$5$0() {
                        var _ref10, status, value, sessionId;

                        return _regeneratorRuntime.async(function callee$5$0$(context$6$0) {
                          while (1) switch (context$6$0.prev = context$6$0.next) {
                            case 0:
                              (0, _helpers.addHandler)(app, 'post', '/wd/hub/session/:sessionId/perform-actions', function (req, res) {
                                res.json({
                                  sessionId: req.params.sessionId,
                                  value: req.body,
                                  status: 0
                                });
                              });

                              context$6$0.next = 3;
                              return _regeneratorRuntime.awrap(_requestPromise2['default'].post(sessionUrl + '/actions', {
                                json: {
                                  actions: [1, 2, 3]
                                }
                              }));

                            case 3:
                              _ref10 = context$6$0.sent;
                              status = _ref10.status;
                              value = _ref10.value;
                              sessionId = _ref10.sessionId;

                              value.should.eql([1, 2, 3]);
                              should.not.exist(status);
                              should.not.exist(sessionId);

                            case 10:
                            case 'end':
                              return context$6$0.stop();
                          }
                        }, null, this);
                      });

                      it('should return error if a proxied request returns a MJSONWP error response', function callee$5$0() {
                        var _ref11, statusCode, message;

                        return _regeneratorRuntime.async(function callee$5$0$(context$6$0) {
                          while (1) switch (context$6$0.prev = context$6$0.next) {
                            case 0:
                              (0, _helpers.addHandler)(app, 'post', '/wd/hub/session/:sessionId/perform-actions', function (req, res) {
                                res.status(500).json({
                                  sessionId: sessionId,
                                  status: 6,
                                  value: 'A problem occurred'
                                });
                              });
                              context$6$0.next = 3;
                              return _regeneratorRuntime.awrap(_requestPromise2['default'].post(sessionUrl + '/actions', {
                                json: {
                                  actions: [1, 2, 3]
                                }
                              }).should.eventually.be.rejected);

                            case 3:
                              _ref11 = context$6$0.sent;
                              statusCode = _ref11.statusCode;
                              message = _ref11.message;

                              statusCode.should.equal(_httpStatusCodes2['default'].NOT_FOUND);
                              message.should.match(/A problem occurred/);

                            case 8:
                            case 'end':
                              return context$6$0.stop();
                          }
                        }, null, this);
                      });

                      it('should return W3C error if a proxied request returns a W3C error response', function callee$5$0() {
                        var error, executeCommandStub, res, statusCode, returnedError, _returnedError$value, w3cError, errMessage, stacktrace;

                        return _regeneratorRuntime.async(function callee$5$0$(context$6$0) {
                          while (1) switch (context$6$0.prev = context$6$0.next) {
                            case 0:
                              error = new Error('Some error occurred');

                              error.w3cStatus = 414;
                              executeCommandStub = _sinon2['default'].stub(driver, 'executeCommand').returns({
                                protocol: 'W3C',
                                error: error
                              });
                              context$6$0.next = 5;
                              return _regeneratorRuntime.awrap(_requestPromise2['default'].post(sessionUrl + '/actions', {
                                json: {
                                  actions: [1, 2, 3]
                                }
                              }).should.eventually.be.rejected);

                            case 5:
                              res = context$6$0.sent;
                              statusCode = res.statusCode;
                              returnedError = res.error;

                              statusCode.should.equal(414);
                              _returnedError$value = returnedError.value;
                              w3cError = _returnedError$value.error;
                              errMessage = _returnedError$value.message;
                              stacktrace = _returnedError$value.stacktrace;

                              w3cError.should.equal('unknown error');
                              stacktrace.should.match(/Some error occurred/);
                              errMessage.should.equal('Some error occurred');
                              executeCommandStub.restore();

                            case 17:
                            case 'end':
                              return context$6$0.stop();
                          }
                        }, null, this);
                      });

                      it('should return error if a proxied request returns a MJSONWP error response but HTTP status code is 200', function callee$5$0() {
                        var _ref12, statusCode, message, error, _error$value5, w3cError, errMessage, stacktrace;

                        return _regeneratorRuntime.async(function callee$5$0$(context$6$0) {
                          while (1) switch (context$6$0.prev = context$6$0.next) {
                            case 0:
                              (0, _helpers.addHandler)(app, 'post', '/wd/hub/session/:sessionId/perform-actions', function (req, res) {
                                res.status(200).json({
                                  sessionId: 'Fake Session Id',
                                  status: 7,
                                  value: 'A problem occurred'
                                });
                              });
                              context$6$0.next = 3;
                              return _regeneratorRuntime.awrap(_requestPromise2['default'].post(sessionUrl + '/actions', {
                                json: {
                                  actions: [1, 2, 3]
                                }
                              }).should.eventually.be.rejected);

                            case 3:
                              _ref12 = context$6$0.sent;
                              statusCode = _ref12.statusCode;
                              message = _ref12.message;
                              error = _ref12.error;

                              statusCode.should.equal(_httpStatusCodes2['default'].NOT_FOUND);
                              message.should.match(/A problem occurred/);
                              _error$value5 = error.value;
                              w3cError = _error$value5.error;
                              errMessage = _error$value5.message;
                              stacktrace = _error$value5.stacktrace;

                              w3cError.should.equal('no such element');
                              errMessage.should.match(/A problem occurred/);
                              stacktrace.should.exist;

                            case 16:
                            case 'end':
                              return context$6$0.stop();
                          }
                        }, null, this);
                      });

                      it('should return error if a proxied request returns a W3C error response', function callee$5$0() {
                        var _ref13, statusCode, message, error, _error$value6, w3cError, stacktrace;

                        return _regeneratorRuntime.async(function callee$5$0$(context$6$0) {
                          while (1) switch (context$6$0.prev = context$6$0.next) {
                            case 0:
                              (0, _helpers.addHandler)(app, 'post', '/wd/hub/session/:sessionId/perform-actions', function (req, res) {
                                res.status(404).json({
                                  value: {
                                    error: 'no such element',
                                    message: 'does not make a difference',
                                    stacktrace: 'arbitrary stacktrace'
                                  }
                                });
                              });
                              context$6$0.next = 3;
                              return _regeneratorRuntime.awrap(_requestPromise2['default'].post(sessionUrl + '/actions', {
                                json: {
                                  actions: [1, 2, 3]
                                }
                              }).should.eventually.be.rejected);

                            case 3:
                              _ref13 = context$6$0.sent;
                              statusCode = _ref13.statusCode;
                              message = _ref13.message;
                              error = _ref13.error;

                              statusCode.should.equal(_httpStatusCodes2['default'].NOT_FOUND);
                              message.should.match(/does not make a difference/);
                              _error$value6 = error.value;
                              w3cError = _error$value6.error;
                              stacktrace = _error$value6.stacktrace;

                              w3cError.should.equal('no such element');
                              stacktrace.should.match(/arbitrary stacktrace/);

                            case 14:
                            case 'end':
                              return context$6$0.stop();
                          }
                        }, null, this);
                      });

                      it('should return an error if a proxied request returns a W3C error response', function callee$5$0() {
                        var _ref14, statusCode, message, error, _error$value7, w3cError, stacktrace;

                        return _regeneratorRuntime.async(function callee$5$0$(context$6$0) {
                          while (1) switch (context$6$0.prev = context$6$0.next) {
                            case 0:
                              (0, _helpers.addHandler)(app, 'post', '/wd/hub/session/:sessionId/perform-actions', function (req, res) {
                                res.set('Connection', 'close');
                                res.status(444).json({
                                  value: {
                                    error: 'bogus error code',
                                    message: 'does not make a difference',
                                    stacktrace: 'arbitrary stacktrace'
                                  }
                                });
                              });
                              context$6$0.next = 3;
                              return _regeneratorRuntime.awrap(_requestPromise2['default'].post(sessionUrl + '/actions', {
                                json: {
                                  actions: [1, 2, 3]
                                }
                              }).should.eventually.be.rejected);

                            case 3:
                              _ref14 = context$6$0.sent;
                              statusCode = _ref14.statusCode;
                              message = _ref14.message;
                              error = _ref14.error;

                              statusCode.should.equal(_httpStatusCodes2['default'].INTERNAL_SERVER_ERROR);
                              message.should.match(/does not make a difference/);
                              _error$value7 = error.value;
                              w3cError = _error$value7.error;
                              stacktrace = _error$value7.stacktrace;

                              w3cError.should.equal('unknown error');
                              stacktrace.should.match(/arbitrary stacktrace/);

                            case 14:
                            case 'end':
                              return context$6$0.stop();
                          }
                        }, null, this);
                      });

                      // Tests for special timeout cases: Refer to https://github.com/appium/appium/issues/11016)
                      describe('/timeouts W3C and MJSONWP compatibility', function () {
                        it('should use a merged /timeouts object that is W3C and MJSONWP compatible', function callee$6$0() {
                          var _ref15, value;

                          return _regeneratorRuntime.async(function callee$6$0$(context$7$0) {
                            var _this2 = this;

                            while (1) switch (context$7$0.prev = context$7$0.next) {
                              case 0:
                                (0, _helpers.addHandler)(app, 'post', '/wd/hub/session/:sessionId/timeouts', function (req, res) {
                                  var _req$body = req.body;
                                  var type = _req$body.type;
                                  var ms = _req$body.ms;
                                  var script = _req$body.script;

                                  type.should.equal('script');
                                  ms.should.equal(100);
                                  script.should.equal(100);
                                  res.json({
                                    sessionId: req.params.sessionId,
                                    value: true,
                                    status: 0
                                  });
                                });
                                driver.timeouts = function callee$7$0(timeoutsObj) {
                                  return _regeneratorRuntime.async(function callee$7$0$(context$8$0) {
                                    while (1) switch (context$8$0.prev = context$8$0.next) {
                                      case 0:
                                        context$8$0.next = 2;
                                        return _regeneratorRuntime.awrap(jwproxy.command('/timeouts', 'POST', timeoutsObj));

                                      case 2:
                                        return context$8$0.abrupt('return', context$8$0.sent);

                                      case 3:
                                      case 'end':
                                        return context$8$0.stop();
                                    }
                                  }, null, _this2);
                                };
                                context$7$0.next = 4;
                                return _regeneratorRuntime.awrap(_requestPromise2['default'].post(sessionUrl + '/timeouts', {
                                  json: {
                                    script: 100
                                  }
                                }));

                              case 4:
                                _ref15 = context$7$0.sent;
                                value = _ref15.value;

                                value.should.be['true'];

                              case 7:
                              case 'end':
                                return context$7$0.stop();
                            }
                          }, null, this);
                        });

                        it('should call MJSONWP /timeouts multiple times if multiple W3C timeout types are passed', function callee$6$0() {
                          var timeoutsCalled, calls, _ref16, value;

                          return _regeneratorRuntime.async(function callee$6$0$(context$7$0) {
                            var _this3 = this;

                            while (1) switch (context$7$0.prev = context$7$0.next) {
                              case 0:
                                timeoutsCalled = {};
                                calls = 0;

                                (0, _helpers.addHandler)(app, 'post', '/wd/hub/session/:sessionId/timeouts', function (req, res) {
                                  var _req$body2 = req.body;
                                  var type = _req$body2.type;
                                  var ms = _req$body2.ms;
                                  var script = _req$body2.script;
                                  var pageLoad = _req$body2.pageLoad;
                                  var implicit = _req$body2.implicit;

                                  timeoutsCalled[type] = true;
                                  calls++;

                                  switch (type) {
                                    case 'script':
                                      ms.should.equal(100);
                                      break;
                                    case 'pageLoad':
                                      ms.should.equal(200);
                                      break;
                                    case 'implicit':
                                      ms.should.equal(300);
                                      break;
                                    default:
                                      throw new Error('Invalid type provided: ' + type);
                                  }

                                  script.should.equal(100);
                                  pageLoad.should.equal(200);
                                  implicit.should.equal(300);
                                  res.json({
                                    sessionId: req.params.sessionId,
                                    value: true,
                                    status: 0
                                  });
                                });
                                driver.timeouts = function callee$7$0(timeoutsObj) {
                                  return _regeneratorRuntime.async(function callee$7$0$(context$8$0) {
                                    while (1) switch (context$8$0.prev = context$8$0.next) {
                                      case 0:
                                        context$8$0.next = 2;
                                        return _regeneratorRuntime.awrap(jwproxy.command('/timeouts', 'POST', timeoutsObj));

                                      case 2:
                                        return context$8$0.abrupt('return', context$8$0.sent);

                                      case 3:
                                      case 'end':
                                        return context$8$0.stop();
                                    }
                                  }, null, _this3);
                                };
                                context$7$0.next = 6;
                                return _regeneratorRuntime.awrap(_requestPromise2['default'].post(sessionUrl + '/timeouts', {
                                  json: {
                                    script: 100,
                                    pageLoad: 200,
                                    implicit: 300
                                  }
                                }));

                              case 6:
                                _ref16 = context$7$0.sent;
                                value = _ref16.value;

                                timeoutsCalled.script.should.be['true'];
                                timeoutsCalled.pageLoad.should.be['true'];
                                timeoutsCalled.implicit.should.be['true'];
                                calls.should.equal(3);
                                value.should.be['true'];

                              case 13:
                              case 'end':
                                return context$7$0.stop();
                            }
                          }, null, this);
                        });

                        it('should reject if one of the W3C timeouts being passed in fails on MJSONWP', function callee$6$0() {
                          var _ref17, statusCode, message;

                          return _regeneratorRuntime.async(function callee$6$0$(context$7$0) {
                            var _this4 = this;

                            while (1) switch (context$7$0.prev = context$7$0.next) {
                              case 0:
                                (0, _helpers.addHandler)(app, 'post', '/wd/hub/session/:sessionId/timeouts', function (req, res) {
                                  var type = req.body.type;

                                  if (type === 'pageLoad') {
                                    res.status(500).json({
                                      sessionId: sessionId,
                                      status: 6,
                                      value: 'A problem occurred on pageLoad timeout'
                                    });
                                  } else {
                                    res.json({
                                      sessionId: req.params.sessionId,
                                      value: true,
                                      status: 0
                                    });
                                  }
                                });
                                driver.timeouts = function callee$7$0(timeoutsObj) {
                                  return _regeneratorRuntime.async(function callee$7$0$(context$8$0) {
                                    while (1) switch (context$8$0.prev = context$8$0.next) {
                                      case 0:
                                        context$8$0.next = 2;
                                        return _regeneratorRuntime.awrap(jwproxy.command('/timeouts', 'POST', timeoutsObj));

                                      case 2:
                                        return context$8$0.abrupt('return', context$8$0.sent);

                                      case 3:
                                      case 'end':
                                        return context$8$0.stop();
                                    }
                                  }, null, _this4);
                                };
                                context$7$0.next = 4;
                                return _regeneratorRuntime.awrap(_requestPromise2['default'].post(sessionUrl + '/timeouts', {
                                  json: {
                                    script: 100,
                                    pageLoad: 200,
                                    implicit: 300
                                  }
                                }).should.eventually.be.rejected);

                              case 4:
                                _ref17 = context$7$0.sent;
                                statusCode = _ref17.statusCode;
                                message = _ref17.message;

                                statusCode.should.equal(_httpStatusCodes2['default'].NOT_FOUND);
                                message.should.match(/A problem occurred/);

                              case 9:
                              case 'end':
                                return context$7$0.stop();
                            }
                          }, null, this);
                        });
                      });
                    });

                  case 10:
                  case 'end':
                    return context$4$0.stop();
                }
              }, null, this);
            });
          });

          it('should handle commands with no response values', function callee$2$0() {
            var res;
            return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
              while (1) switch (context$3$0.prev = context$3$0.next) {
                case 0:
                  context$3$0.next = 2;
                  return _regeneratorRuntime.awrap((0, _requestPromise2['default'])({
                    url: baseUrl + '/session/foo/forward',
                    method: 'POST',
                    json: true
                  }));

                case 2:
                  res = context$3$0.sent;

                  res.should.eql({
                    status: 0,
                    value: null,
                    sessionId: "foo"
                  });

                case 4:
                case 'end':
                  return context$3$0.stop();
              }
            }, null, this);
          });

          it('should allow empty string response values', function callee$2$0() {
            var res;
            return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
              while (1) switch (context$3$0.prev = context$3$0.next) {
                case 0:
                  context$3$0.next = 2;
                  return _regeneratorRuntime.awrap((0, _requestPromise2['default'])({
                    url: baseUrl + '/session/foo/element/bar/text',
                    method: 'GET',
                    json: true
                  }));

                case 2:
                  res = context$3$0.sent;

                  res.should.eql({
                    status: 0,
                    value: "",
                    sessionId: "foo"
                  });

                case 4:
                case 'end':
                  return context$3$0.stop();
              }
            }, null, this);
          });

          it('should send 500 response and an Unknown object for rejected commands', function callee$2$0() {
            var res;
            return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
              while (1) switch (context$3$0.prev = context$3$0.next) {
                case 0:
                  context$3$0.next = 2;
                  return _regeneratorRuntime.awrap((0, _requestPromise2['default'])({
                    url: baseUrl + '/session/foo/refresh',
                    method: 'POST',
                    json: true,
                    resolveWithFullResponse: true,
                    simple: false
                  }));

                case 2:
                  res = context$3$0.sent;

                  res.statusCode.should.equal(500);
                  res.body.should.eql({
                    status: 13,
                    value: {
                      message: 'An unknown server-side error occurred while processing ' + 'the command. Original error: Too Fresh!'
                    },
                    sessionId: "foo"
                  });

                case 5:
                case 'end':
                  return context$3$0.stop();
              }
            }, null, this);
          });

          it('should not throw UnknownError when known', function callee$2$0() {
            var res;
            return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
              while (1) switch (context$3$0.prev = context$3$0.next) {
                case 0:
                  context$3$0.next = 2;
                  return _regeneratorRuntime.awrap((0, _requestPromise2['default'])({
                    url: baseUrl + '/session/foo',
                    method: 'GET',
                    json: true,
                    resolveWithFullResponse: true,
                    simple: false
                  }));

                case 2:
                  res = context$3$0.sent;

                  res.statusCode.should.equal(404);
                  res.body.should.eql({
                    status: 6,
                    value: {
                      message: 'A session is either terminated or not started'
                    },
                    sessionId: "foo"
                  });

                case 5:
                case 'end':
                  return context$3$0.stop();
              }
            }, null, this);
          });
        });

        describe('session Ids', function () {
          var driver = new _fakeDriver.FakeDriver();
          var mjsonwpServer = undefined;

          before(function callee$2$0() {
            return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
              while (1) switch (context$3$0.prev = context$3$0.next) {
                case 0:
                  context$3$0.next = 2;
                  return _regeneratorRuntime.awrap((0, _2.server)((0, _2.routeConfiguringFunction)(driver), serverPort));

                case 2:
                  mjsonwpServer = context$3$0.sent;

                case 3:
                case 'end':
                  return context$3$0.stop();
              }
            }, null, this);
          });

          after(function callee$2$0() {
            return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
              while (1) switch (context$3$0.prev = context$3$0.next) {
                case 0:
                  context$3$0.next = 2;
                  return _regeneratorRuntime.awrap(mjsonwpServer.close());

                case 2:
                case 'end':
                  return context$3$0.stop();
              }
            }, null, this);
          });

          afterEach(function () {
            driver.sessionId = null;
          });

          it('should return null SessionId for commands without sessionIds', function callee$2$0() {
            var res;
            return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
              while (1) switch (context$3$0.prev = context$3$0.next) {
                case 0:
                  context$3$0.next = 2;
                  return _regeneratorRuntime.awrap((0, _requestPromise2['default'])({
                    url: baseUrl + '/status',
                    method: 'GET',
                    json: true
                  }));

                case 2:
                  res = context$3$0.sent;

                  should.equal(res.sessionId, null);

                case 4:
                case 'end':
                  return context$3$0.stop();
              }
            }, null, this);
          });

          it('responds with the same session ID in the request', function callee$2$0() {
            var sessionId, res;
            return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
              while (1) switch (context$3$0.prev = context$3$0.next) {
                case 0:
                  sessionId = 'Vader Sessions';

                  driver.sessionId = sessionId;

                  context$3$0.next = 4;
                  return _regeneratorRuntime.awrap((0, _requestPromise2['default'])({
                    url: baseUrl + '/session/' + sessionId + '/url',
                    method: 'POST',
                    json: { url: 'http://google.com' }
                  }));

                case 4:
                  res = context$3$0.sent;

                  should.exist(res.sessionId);
                  res.sessionId.should.eql(sessionId);

                case 7:
                case 'end':
                  return context$3$0.stop();
              }
            }, null, this);
          });

          it('yells if no session exists', function callee$2$0() {
            var sessionId, res;
            return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
              while (1) switch (context$3$0.prev = context$3$0.next) {
                case 0:
                  sessionId = 'Vader Sessions';
                  context$3$0.next = 3;
                  return _regeneratorRuntime.awrap((0, _requestPromise2['default'])({
                    url: baseUrl + '/session/' + sessionId + '/url',
                    method: 'POST',
                    json: { url: 'http://google.com' },
                    resolveWithFullResponse: true,
                    simple: false
                  }));

                case 3:
                  res = context$3$0.sent;

                  res.statusCode.should.equal(404);
                  res.body.status.should.equal(6);
                  res.body.value.message.should.contain('session');

                case 7:
                case 'end':
                  return context$3$0.stop();
              }
            }, null, this);
          });

          it('yells if invalid session is sent', function callee$2$0() {
            var sessionId, res;
            return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
              while (1) switch (context$3$0.prev = context$3$0.next) {
                case 0:
                  sessionId = 'Vader Sessions';

                  driver.sessionId = 'recession';

                  context$3$0.next = 4;
                  return _regeneratorRuntime.awrap((0, _requestPromise2['default'])({
                    url: baseUrl + '/session/' + sessionId + '/url',
                    method: 'POST',
                    json: { url: 'http://google.com' },
                    resolveWithFullResponse: true,
                    simple: false
                  }));

                case 4:
                  res = context$3$0.sent;

                  res.statusCode.should.equal(404);
                  res.body.status.should.equal(6);
                  res.body.value.message.should.contain('session');

                case 8:
                case 'end':
                  return context$3$0.stop();
              }
            }, null, this);
          });

          it('should have session IDs in error responses', function callee$2$0() {
            var sessionId, res;
            return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
              while (1) switch (context$3$0.prev = context$3$0.next) {
                case 0:
                  sessionId = 'Vader Sessions';

                  driver.sessionId = sessionId;

                  context$3$0.next = 4;
                  return _regeneratorRuntime.awrap((0, _requestPromise2['default'])({
                    url: baseUrl + '/session/' + sessionId + '/refresh',
                    method: 'POST',
                    json: true,
                    resolveWithFullResponse: true,
                    simple: false
                  }));

                case 4:
                  res = context$3$0.sent;

                  res.statusCode.should.equal(500);
                  res.body.should.eql({
                    status: 13,
                    value: {
                      message: 'An unknown server-side error occurred while processing ' + 'the command. Original error: Too Fresh!'
                    },
                    sessionId: sessionId
                  });

                case 7:
                case 'end':
                  return context$3$0.stop();
              }
            }, null, this);
          });

          it('should return a new session ID on create', function callee$2$0() {
            var res;
            return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
              while (1) switch (context$3$0.prev = context$3$0.next) {
                case 0:
                  context$3$0.next = 2;
                  return _regeneratorRuntime.awrap((0, _requestPromise2['default'])({
                    url: baseUrl + '/session',
                    method: 'POST',
                    json: { desiredCapabilities: { greeting: 'hello' }, requiredCapabilities: { valediction: 'bye' } }
                  }));

                case 2:
                  res = context$3$0.sent;

                  should.exist(res.sessionId);
                  res.sessionId.should.equal('1234');
                  res.value.should.eql({ greeting: 'hello', valediction: 'bye' });

                case 6:
                case 'end':
                  return context$3$0.stop();
              }
            }, null, this);
          });
        });

        describe('via drivers jsonwp proxy', function () {
          var driver = undefined;
          var sessionId = 'foo';
          var mjsonwpServer = undefined;

          beforeEach(function callee$2$0() {
            return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
              while (1) switch (context$3$0.prev = context$3$0.next) {
                case 0:
                  driver = new _fakeDriver.FakeDriver();
                  driver.sessionId = sessionId;
                  driver.proxyActive = function () {
                    return true;
                  };
                  driver.canProxy = function () {
                    return true;
                  };

                  context$3$0.next = 6;
                  return _regeneratorRuntime.awrap((0, _2.server)((0, _2.routeConfiguringFunction)(driver), serverPort));

                case 6:
                  mjsonwpServer = context$3$0.sent;

                case 7:
                case 'end':
                  return context$3$0.stop();
              }
            }, null, this);
          });

          afterEach(function callee$2$0() {
            return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
              while (1) switch (context$3$0.prev = context$3$0.next) {
                case 0:
                  context$3$0.next = 2;
                  return _regeneratorRuntime.awrap(mjsonwpServer.close());

                case 2:
                case 'end':
                  return context$3$0.stop();
              }
            }, null, this);
          });

          it('should give a nice error if proxying is set but no proxy function exists', function callee$2$0() {
            var res;
            return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
              while (1) switch (context$3$0.prev = context$3$0.next) {
                case 0:
                  driver.canProxy = function () {
                    return false;
                  };
                  context$3$0.next = 3;
                  return _regeneratorRuntime.awrap((0, _requestPromise2['default'])({
                    url: baseUrl + '/session/' + sessionId + '/url',
                    method: 'POST',
                    json: { url: 'http://google.com' },
                    resolveWithFullResponse: true,
                    simple: false
                  }));

                case 3:
                  res = context$3$0.sent;

                  res.statusCode.should.equal(500);
                  res.body.should.eql({
                    status: 13,
                    value: {
                      message: 'An unknown server-side error occurred while processing ' + 'the command. Original error: Trying to proxy to a JSONWP ' + 'server but driver is unable to proxy'
                    },
                    sessionId: sessionId
                  });

                case 6:
                case 'end':
                  return context$3$0.stop();
              }
            }, null, this);
          });

          it('should pass on any errors in proxying', function callee$2$0() {
            var res;
            return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
              while (1) switch (context$3$0.prev = context$3$0.next) {
                case 0:
                  driver.proxyReqRes = function callee$3$0() {
                    return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
                      while (1) switch (context$4$0.prev = context$4$0.next) {
                        case 0:
                          throw new Error("foo");

                        case 1:
                        case 'end':
                          return context$4$0.stop();
                      }
                    }, null, this);
                  };
                  context$3$0.next = 3;
                  return _regeneratorRuntime.awrap((0, _requestPromise2['default'])({
                    url: baseUrl + '/session/' + sessionId + '/url',
                    method: 'POST',
                    json: { url: 'http://google.com' },
                    resolveWithFullResponse: true,
                    simple: false
                  }));

                case 3:
                  res = context$3$0.sent;

                  res.statusCode.should.equal(500);
                  res.body.should.eql({
                    status: 13,
                    value: {
                      message: 'An unknown server-side error occurred while processing ' + 'the command. Original error: Could not proxy. Proxy ' + 'error: foo'
                    },
                    sessionId: sessionId
                  });

                case 6:
                case 'end':
                  return context$3$0.stop();
              }
            }, null, this);
          });

          it('should able to throw ProxyRequestError in proxying', function callee$2$0() {
            var res;
            return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
              while (1) switch (context$3$0.prev = context$3$0.next) {
                case 0:
                  driver.proxyReqRes = function callee$3$0() {
                    var jsonwp;
                    return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
                      while (1) switch (context$4$0.prev = context$4$0.next) {
                        case 0:
                          jsonwp = { status: 35, value: "No such context found.", sessionId: "foo" };
                          throw new _2.errors.ProxyRequestError('Could not proxy command to remote server. ', jsonwp);

                        case 2:
                        case 'end':
                          return context$4$0.stop();
                      }
                    }, null, this);
                  };
                  context$3$0.next = 3;
                  return _regeneratorRuntime.awrap((0, _requestPromise2['default'])({
                    url: baseUrl + '/session/' + sessionId + '/url',
                    method: 'POST',
                    json: { url: 'http://google.com' },
                    resolveWithFullResponse: true,
                    simple: false
                  }));

                case 3:
                  res = context$3$0.sent;

                  res.statusCode.should.equal(500);
                  res.body.should.eql({
                    status: 35,
                    "value": { "message": "No such context found." },
                    sessionId: "foo"
                  });

                case 6:
                case 'end':
                  return context$3$0.stop();
              }
            }, null, this);
          });

          it('should let the proxy handle req/res', function callee$2$0() {
            var res;
            return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
              while (1) switch (context$3$0.prev = context$3$0.next) {
                case 0:
                  driver.proxyReqRes = function callee$3$0(req, res) {
                    return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
                      while (1) switch (context$4$0.prev = context$4$0.next) {
                        case 0:
                          res.status(200).json({ custom: 'data' });

                        case 1:
                        case 'end':
                          return context$4$0.stop();
                      }
                    }, null, this);
                  };
                  context$3$0.next = 3;
                  return _regeneratorRuntime.awrap((0, _requestPromise2['default'])({
                    url: baseUrl + '/session/' + sessionId + '/url',
                    method: 'POST',
                    json: { url: 'http://google.com' },
                    resolveWithFullResponse: true,
                    simple: false
                  }));

                case 3:
                  res = context$3$0.sent;

                  res.statusCode.should.equal(200);
                  res.body.should.eql({ custom: 'data' });

                case 6:
                case 'end':
                  return context$3$0.stop();
              }
            }, null, this);
          });

          it('should avoid jsonwp proxying when path matches avoidance list', function callee$2$0() {
            var res;
            return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
              while (1) switch (context$3$0.prev = context$3$0.next) {
                case 0:
                  driver.getProxyAvoidList = function () {
                    return [['POST', new RegExp('^/session/[^/]+/url$')]];
                  };
                  context$3$0.next = 3;
                  return _regeneratorRuntime.awrap((0, _requestPromise2['default'])({
                    url: baseUrl + '/session/' + sessionId + '/url',
                    method: 'POST',
                    json: { url: 'http://google.com' },
                    resolveWithFullResponse: true,
                    simple: false
                  }));

                case 3:
                  res = context$3$0.sent;

                  res.statusCode.should.equal(200);
                  res.body.should.eql({
                    status: 0,
                    value: "Navigated to: http://google.com",
                    sessionId: sessionId
                  });

                case 6:
                case 'end':
                  return context$3$0.stop();
              }
            }, null, this);
          });

          it('should fail if avoid proxy list is malformed in some way', function callee$2$0() {
            var badProxyAvoidanceList, lists, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, list;

            return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
              while (1) switch (context$3$0.prev = context$3$0.next) {
                case 0:
                  badProxyAvoidanceList = function badProxyAvoidanceList(list) {
                    var res;
                    return _regeneratorRuntime.async(function badProxyAvoidanceList$(context$4$0) {
                      while (1) switch (context$4$0.prev = context$4$0.next) {
                        case 0:
                          driver.getProxyAvoidList = function () {
                            return list;
                          };
                          context$4$0.next = 3;
                          return _regeneratorRuntime.awrap((0, _requestPromise2['default'])({
                            url: baseUrl + '/session/' + sessionId + '/url',
                            method: 'POST',
                            json: { url: 'http://google.com' },
                            resolveWithFullResponse: true,
                            simple: false
                          }));

                        case 3:
                          res = context$4$0.sent;

                          res.statusCode.should.equal(500);
                          res.body.status.should.equal(13);
                          res.body.value.message.should.contain("roxy");

                        case 7:
                        case 'end':
                          return context$4$0.stop();
                      }
                    }, null, this);
                  };

                  lists = ['foo', [['foo']], [['BAR', /lol/]], [['GET', 'foo']]];
                  _iteratorNormalCompletion = true;
                  _didIteratorError = false;
                  _iteratorError = undefined;
                  context$3$0.prev = 5;
                  _iterator = _getIterator(lists);

                case 7:
                  if (_iteratorNormalCompletion = (_step = _iterator.next()).done) {
                    context$3$0.next = 14;
                    break;
                  }

                  list = _step.value;
                  context$3$0.next = 11;
                  return _regeneratorRuntime.awrap(badProxyAvoidanceList(list));

                case 11:
                  _iteratorNormalCompletion = true;
                  context$3$0.next = 7;
                  break;

                case 14:
                  context$3$0.next = 20;
                  break;

                case 16:
                  context$3$0.prev = 16;
                  context$3$0.t0 = context$3$0['catch'](5);
                  _didIteratorError = true;
                  _iteratorError = context$3$0.t0;

                case 20:
                  context$3$0.prev = 20;
                  context$3$0.prev = 21;

                  if (!_iteratorNormalCompletion && _iterator['return']) {
                    _iterator['return']();
                  }

                case 23:
                  context$3$0.prev = 23;

                  if (!_didIteratorError) {
                    context$3$0.next = 26;
                    break;
                  }

                  throw _iteratorError;

                case 26:
                  return context$3$0.finish(23);

                case 27:
                  return context$3$0.finish(20);

                case 28:
                case 'end':
                  return context$3$0.stop();
              }
            }, null, this, [[5, 16, 20, 28], [21,, 23, 27]]);
          });

          it('should avoid proxying non-session commands even if not in the list', function callee$2$0() {
            var res;
            return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
              while (1) switch (context$3$0.prev = context$3$0.next) {
                case 0:
                  driver.getProxyAvoidList = function () {
                    return [['POST', new RegExp('')]];
                  };

                  context$3$0.next = 3;
                  return _regeneratorRuntime.awrap((0, _requestPromise2['default'])({
                    url: baseUrl + '/status',
                    method: 'GET',
                    json: true,
                    resolveWithFullResponse: true,
                    simple: false
                  }));

                case 3:
                  res = context$3$0.sent;

                  res.statusCode.should.equal(200);
                  res.body.should.eql({
                    status: 0,
                    value: "I'm fine",
                    sessionId: null
                  });

                case 6:
                case 'end':
                  return context$3$0.stop();
              }
            }, null, this);
          });

          it('should avoid proxying deleteSession commands', function callee$2$0() {
            var res;
            return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
              while (1) switch (context$3$0.prev = context$3$0.next) {
                case 0:
                  driver.getProxyAvoidList = function () {
                    return [['POST', new RegExp('')]];
                  };

                  driver.sessionId.should.equal(sessionId);
                  context$3$0.next = 4;
                  return _regeneratorRuntime.awrap((0, _requestPromise2['default'])({
                    url: baseUrl + '/session/' + sessionId,
                    method: 'DELETE',
                    json: true,
                    resolveWithFullResponse: true,
                    simple: false
                  }));

                case 4:
                  res = context$3$0.sent;

                  res.statusCode.should.equal(200);
                  should.not.exist(driver.sessionId);
                  driver.jwpProxyActive.should.be['false'];

                case 8:
                case 'end':
                  return context$3$0.stop();
              }
            }, null, this);
          });
        });

      case 4:
      case 'end':
        return context$1$0.stop();
    }
  }, null, this);
});

// make sure adding the optional 'id' doesn't clobber a route where we
// have an actual required 'id'

// let {status, value, sessionId} = await request({
// let {status, value, sessionId} = await request({
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlc3QvcHJvdG9jb2wvcHJvdG9jb2wtZTJlLXNwZWNzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O2lCQUU4RSxPQUFPOzswQkFDMUQsZUFBZTs7c0JBQzVCLFFBQVE7Ozs7OEJBQ0YsaUJBQWlCOzs7O29CQUNwQixNQUFNOzs7OzhCQUNJLGtCQUFrQjs7OztxQkFDM0IsT0FBTzs7OzsrQkFDRyxtQkFBbUI7Ozs7dUJBQ0QsV0FBVzs7bUNBQ0osNkJBQTZCOztBQUdsRixJQUFJLE1BQU0sR0FBRyxrQkFBSyxNQUFNLEVBQUUsQ0FBQztBQUMzQixrQkFBSyxHQUFHLDZCQUFnQixDQUFDOztBQUV6QixJQUFNLFVBQVUsR0FBRyxJQUFJLENBQUM7QUFDeEIsSUFBTSxPQUFPLHlCQUF1QixVQUFVLFlBQVMsQ0FBQzs7QUFFeEQsUUFBUSxDQUFDLFVBQVUsRUFBRTs7Ozs7Ozs7QUFLbkIsZ0JBQVEsQ0FBQyxrQkFBa0IsRUFBRSxZQUFZO0FBQ3ZDLGNBQUksQ0FBQyxHQUFHLDRCQUFnQixDQUFDO0FBQ3pCLFlBQUUsQ0FBQyx3REFBd0QsRUFBRTs7Ozs7bURBQ3BELENBQUMsQ0FBQyxNQUFNLENBQUMsbUJBQW1CLENBQUM7OzttQ0FBRSxNQUFNLENBQUMsT0FBTyxDQUFDLFFBQVE7Ozs7Ozs7V0FDOUQsQ0FBQyxDQUFDO1NBQ0osQ0FBQyxDQUFDOztBQUVILGdCQUFRLENBQUMsb0JBQW9CLEVBQUUsWUFBWTtBQUN6QyxjQUFJLGFBQWEsWUFBQSxDQUFDO0FBQ2xCLGNBQUksTUFBTSxZQUFBLENBQUM7O0FBRVgsZ0JBQU0sQ0FBQzs7OztBQUNMLHdCQUFNLEdBQUcsNEJBQWdCLENBQUM7QUFDMUIsd0JBQU0sQ0FBQyxTQUFTLEdBQUcsS0FBSyxDQUFDOzttREFDSCxlQUFPLGlDQUF5QixNQUFNLENBQUMsRUFBRSxVQUFVLENBQUM7OztBQUExRSwrQkFBYTs7Ozs7OztXQUNkLENBQUMsQ0FBQzs7QUFFSCxlQUFLLENBQUM7Ozs7O21E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UyxFQUFFLElBQUk7bUJBQ2hCLENBQUMsQ0FBQzs7Ozs7OztXQUNKLENBQUMsQ0FBQzs7QUFFSCxZQUFFLENBQUMsOENBQThDLEVBQUU7Z0JBSTdDLEdBQUc7Ozs7QUFIUCx3QkFBTSxDQUFDLGlCQUFpQixHQUFHLFlBQU07QUFBRSwyQkFBTyxDQUFDLENBQUMsTUFBTSxFQUFFLElBQUksTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQzttQkFBRSxDQUFDOztBQUV4RSx3QkFBTSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxDQUFDOzttREFDekIsaUNBQVE7QUFDdEIsdUJBQUcsRUFBSyxPQUFPLGlCQUFZLFNBQVMsQUFBRTtBQUN0QywwQkFBTSxFQUFFLFFBQVE7QUFDaEIsd0JBQUksRUFBRSxJQUFJO0FBQ1YsMkNBQXVCLEVBQUUsSUFBSTtBQUM3QiwwQkFBTSxFQUFFLEtBQUs7bUJBQ2QsQ0FBQzs7O0FBTkUscUJBQUc7O0FBUVAscUJBQUcsQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUNqQyx3QkFBTSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDO0FBQ25DLHdCQUFNLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxFQUFFLFNBQU0sQ0FBQzs7Ozs7OztXQUN2QyxDQUFDLENBQUM7U0FDSixDQUFDLENBQUM7Ozs7Ozs7Q0FDSixDQUFDLENBQUMiLCJmaWxlIjoidGVzdC9wcm90b2NvbC9wcm90b2NvbC1lMmUtc3BlY3MuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyB0cmFuc3BpbGU6bW9jaGFcblxuaW1wb3J0IHsgc2VydmVyLCByb3V0ZUNvbmZpZ3VyaW5nRnVuY3Rpb24sIGVycm9ycywgSldQcm94eSwgQmFzZURyaXZlciB9IGZyb20gJy4uLy4uJztcbmltcG9ydCB7IEZha2VEcml2ZXIgfSBmcm9tICcuL2Zha2UtZHJpdmVyJztcbmltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgcmVxdWVzdCBmcm9tICdyZXF1ZXN0LXByb21pc2UnO1xuaW1wb3J0IGNoYWkgZnJvbSAnY2hhaSc7XG5pbXBvcnQgY2hhaUFzUHJvbWlzZWQgZnJvbSAnY2hhaS1hcy1wcm9taXNlZCc7XG5pbXBvcnQgc2lub24gZnJvbSAnc2lub24nO1xuaW1wb3J0IEhUVFBTdGF0dXNDb2RlcyBmcm9tICdodHRwLXN0YXR1cy1jb2Rlcyc7XG5pbXBvcnQgeyBjcmVhdGVQcm94eVNlcnZlciwgYWRkSGFuZGxlciB9IGZyb20gJy4vaGVscGVycyc7XG5pbXBvcnQgeyBNSlNPTldQX0VMRU1FTlRfS0VZLCBXM0NfRUxFTUVOVF9LRVkgfSBmcm9tICcuLi8uLi9saWIvcHJvdG9jb2wvcHJvdG9jb2wnO1xuXG5cbmxldCBzaG91bGQgPSBjaGFpLnNob3VsZCgpO1xuY2hhaS51c2UoY2hhaUFzUHJvbWlzZWQpO1xuXG5jb25zdCBzZXJ2ZXJQb3J0ID0gODE4MTtcbmNvbnN0IGJhc2VVcmwgPSBgaHR0cDovL2xvY2FsaG9zdDoke3NlcnZlclBvcnR9L3dkL2h1YmA7XG5cbmRlc2NyaWJlKCdQcm90b2NvbCcsIGFzeW5jIGZ1bmN0aW9uICgpIHtcblxuICAvL1RPRE86IG1vcmUgdGVzdHMhOlxuICAvLyBVbmtub3duIGNvbW1hbmRzIHNob3VsZCByZXR1cm4gNDA0XG5cbiAgZGVzY3JpYmUoJ2RpcmVjdCB0byBkcml2ZXInLCBmdW5jdGlvbiAoKSB7XG4gICAgbGV0IGQgPSBuZXcgRmFrZURyaXZlcigpO1xuICAgIGl0KCdzaG91bGQgcmV0dXJuIHJlc3BvbnNlIHZhbHVlcyBkaXJlY3RseSBmcm9tIHRoZSBkcml2ZXInLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICAoYXdhaXQgZC5zZXRVcmwoXCJodHRwOi8vZ29vZ2xlLmNvbVwiKSkuc2hvdWxkLmNvbnRhaW4oXCJnb29nbGVcIik7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCd2aWEgZXhwcmVzcyByb3V0ZXInLCBmdW5jdGlvbiAoKSB7XG4gICAgbGV0IG1qc29ud3BTZXJ2ZXI7XG4gICAgbGV0IGRyaXZlcjtcblxuICAgIGJlZm9yZShhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBkcml2ZXIgPSBuZXcgRmFrZURyaXZlcigpO1xuICAgICAgZHJpdmVyLnNlc3Npb25JZCA9ICdmb28nO1xuICAgICAgbWpzb253cFNlcnZlciA9IGF3YWl0IHNlcnZlcihyb3V0ZUNvbmZpZ3VyaW5nRnVuY3Rpb24oZHJpdmVyKSwgc2VydmVyUG9ydCk7XG4gICAgfSk7XG5cbiAgICBhZnRlcihhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBhd2FpdCBtanNvbndwU2VydmVyLmNsb3NlKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHByb3h5IHRvIGRyaXZlciBhbmQgcmV0dXJuIHZhbGlkIGpzb253cCByZXNwb25zZScsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGxldCByZXMgPSBhd2FpdCByZXF1ZXN0KHtcbiAgICAgICAgdXJsOiBgJHtiYXNlVXJsfS9zZXNzaW9uL2Zvby91cmxgLFxuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAganNvbjoge3VybDogJ2h0dHA6Ly9nb29nbGUuY29tJ31cbiAgICAgIH0pO1xuICAgICAgcmVzLnNob3VsZC5lcWwoe1xuICAgICAgICBzdGF0dXM6IDAsXG4gICAgICAgIHZhbHVlOiBcIk5hdmlnYXRlZCB0bzogaHR0cDovL2dvb2dsZS5jb21cIixcbiAgICAgICAgc2Vzc2lvbklkOiBcImZvb1wiXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgYXNzdW1lIHJlcXVlc3RzIHdpdGhvdXQgYSBDb250ZW50LVR5cGUgYXJlIGpzb24gcmVxdWVzdHMnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBsZXQgcmVzID0gYXdhaXQgcmVxdWVzdCh7XG4gICAgICAgIHVybDogYCR7YmFzZVVybH0vc2Vzc2lvbi9mb28vdXJsYCxcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHt1cmw6ICdodHRwOi8vZ29vZ2xlLmNvbSd9KSxcbiAgICAgIH0pO1xuICAgICAgSlNPTi5wYXJzZShyZXMpLnNob3VsZC5lcWwoe1xuICAgICAgICBzdGF0dXM6IDAsXG4gICAgICAgIHZhbHVlOiBcIk5hdmlnYXRlZCB0bzogaHR0cDovL2dvb2dsZS5jb21cIixcbiAgICAgICAgc2Vzc2lvbklkOiBcImZvb1wiXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmVzcG9uZCB0byB4LXd3dy1mb3JtLXVybGVuY29kZWQgYXMgd2VsbCBhcyBqc29uIHJlcXVlc3RzJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgbGV0IHJlcyA9IGF3YWl0IHJlcXVlc3Qoe1xuICAgICAgICB1cmw6IGAke2Jhc2VVcmx9L3Nlc3Npb24vZm9vL3VybGAsXG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBmb3JtOiB7dXJsOiAnaHR0cDovL2dvb2dsZS5jb20nfVxuICAgICAgfSk7XG4gICAgICBKU09OLnBhcnNlKHJlcykuc2hvdWxkLmVxbCh7XG4gICAgICAgIHN0YXR1czogMCxcbiAgICAgICAgdmFsdWU6IFwiTmF2aWdhdGVkIHRvOiBodHRwOi8vZ29vZ2xlLmNvbVwiLFxuICAgICAgICBzZXNzaW9uSWQ6IFwiZm9vXCJcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBpbmNsdWRlIHVybCByZXF1ZXN0IHBhcmFtZXRlcnMgZm9yIG1ldGhvZHMgdG8gdXNlIC0gc2Vzc2lvbmlkJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgbGV0IHJlcyA9IGF3YWl0IHJlcXVlc3Qoe1xuICAgICAgICB1cmw6IGAke2Jhc2VVcmx9L3Nlc3Npb24vZm9vL2JhY2tgLFxuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAganNvbjoge30sXG4gICAgICAgIHNpbXBsZTogZmFsc2UsXG4gICAgICAgIHJlc29sdmVXaXRoRnVsbFJlc3BvbnNlOiB0cnVlXG4gICAgICB9KTtcbiAgICAgIHJlcy5ib2R5LnNob3VsZC5lcWwoe1xuICAgICAgICBzdGF0dXM6IDAsXG4gICAgICAgIHZhbHVlOiBcImZvb1wiLFxuICAgICAgICBzZXNzaW9uSWQ6IFwiZm9vXCJcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBpbmNsdWRlIHVybCByZXF1ZXN0IHBhcmFtZXRlcnMgZm9yIG1ldGhvZHMgdG8gdXNlIC0gZWxlbWVudGlkJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgbGV0IHJlcyA9IGF3YWl0IHJlcXVlc3Qoe1xuICAgICAgICB1cmw6IGAke2Jhc2VVcmx9L3Nlc3Npb24vZm9vL2VsZW1lbnQvYmFyL2NsaWNrYCxcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGpzb246IHt9XG4gICAgICB9KTtcbiAgICAgIHJlcy5zdGF0dXMuc2hvdWxkLmVxdWFsKDApO1xuICAgICAgcmVzLnZhbHVlLnNob3VsZC5lcWwoW1wiYmFyXCIsIFwiZm9vXCJdKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaW5jbHVkZSB1cmwgcmVxIHBhcmFtcyBpbiB0aGUgb3JkZXI6IGN1c3RvbSwgZWxlbWVudCwgc2Vzc2lvbicsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGxldCByZXMgPSBhd2FpdCByZXF1ZXN0KHtcbiAgICAgICAgdXJsOiBgJHtiYXNlVXJsfS9zZXNzaW9uL2Zvby9lbGVtZW50L2Jhci9hdHRyaWJ1dGUvYmF6YCxcbiAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAganNvbjoge31cbiAgICAgIH0pO1xuICAgICAgcmVzLnN0YXR1cy5zaG91bGQuZXF1YWwoMCk7XG4gICAgICByZXMudmFsdWUuc2hvdWxkLmVxbChbXCJiYXpcIiwgXCJiYXJcIiwgXCJmb29cIl0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXNwb25kIHdpdGggNDAwIEJhZCBSZXF1ZXN0IGlmIHBhcmFtZXRlcnMgbWlzc2luZycsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGxldCByZXMgPSBhd2FpdCByZXF1ZXN0KHtcbiAgICAgICAgdXJsOiBgJHtiYXNlVXJsfS9zZXNzaW9uL2Zvby91cmxgLFxuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAganNvbjoge30sXG4gICAgICAgIHJlc29sdmVXaXRoRnVsbFJlc3BvbnNlOiB0cnVlLFxuICAgICAgICBzaW1wbGU6IGZhbHNlXG4gICAgICB9KTtcbiAgICAgIHJlcy5zdGF0dXNDb2RlLnNob3VsZC5lcXVhbCg0MDApO1xuICAgICAgcmVzLmJvZHkuc2hvdWxkLmNvbnRhaW4oXCJ1cmxcIik7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJlamVjdCByZXF1ZXN0cyB3aXRoIGEgYmFkbHkgZm9ybWF0dGVkIGJvZHkgYW5kIG5vdCBjcmFzaCcsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGF3YWl0IHJlcXVlc3Qoe1xuICAgICAgICB1cmw6IGAke2Jhc2VVcmx9L3Nlc3Npb24vZm9vL3VybGAsXG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBqc29uOiBcIm9oIGhlbGxvXCJcbiAgICAgIH0pLnNob3VsZC5ldmVudHVhbGx5LmJlLnJlamVjdGVkO1xuXG4gICAgICBsZXQgcmVzID0gYXdhaXQgcmVxdWVzdCh7XG4gICAgICAgIHVybDogYCR7YmFzZVVybH0vc2Vzc2lvbi9mb28vdXJsYCxcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGpzb246IHt1cmw6ICdodHRwOi8vZ29vZ2xlLmNvbSd9XG4gICAgICB9KTtcbiAgICAgIHJlcy5zaG91bGQuZXFsKHtcbiAgICAgICAgc3RhdHVzOiAwLFxuICAgICAgICB2YWx1ZTogXCJOYXZpZ2F0ZWQgdG86IGh0dHA6Ly9nb29nbGUuY29tXCIsXG4gICAgICAgIHNlc3Npb25JZDogXCJmb29cIlxuICAgICAgfSk7XG5cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZ2V0IDQwNCBmb3IgYmFkIHJvdXRlcycsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGF3YWl0IHJlcXVlc3Qoe1xuICAgICAgICB1cmw6IGAke2Jhc2VVcmx9L2JsYXJnaW1hcmdgLFxuICAgICAgICBtZXRob2Q6ICdHRVQnXG4gICAgICB9KS5zaG91bGQuZXZlbnR1YWxseS5iZS5yZWplY3RlZFdpdGgoXCI0MDRcIik7XG4gICAgfSk7XG5cbiAgICAvLyBUT0RPIHBhc3MgdGhpcyB0ZXN0XG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2FwcGl1bS9ub2RlLW1vYmlsZS1qc29uLXdpcmUtcHJvdG9jb2wvaXNzdWVzLzNcbiAgICBpdCgnNHh4IHJlc3BvbnNlcyBzaG91bGQgaGF2ZSBjb250ZW50LXR5cGUgb2YgdGV4dC9wbGFpbicsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGxldCByZXMgPSBhd2FpdCByZXF1ZXN0KHtcbiAgICAgICAgdXJsOiBgJHtiYXNlVXJsfS9ibGFyZ2ltYXJnYXJpdGFgLFxuICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICByZXNvbHZlV2l0aEZ1bGxSZXNwb25zZTogdHJ1ZSxcbiAgICAgICAgc2ltcGxlOiBmYWxzZSAvLyA0MDQgZXJyb3JzIGZ1bGZpbGwgdGhlIHByb21pc2UsIHJhdGhlciB0aGFuIHJlamVjdGluZ1xuICAgICAgfSk7XG5cbiAgICAgIHJlcy5oZWFkZXJzWydjb250ZW50LXR5cGUnXS5zaG91bGQuaW5jbHVkZSgndGV4dC9wbGFpbicpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB0aHJvdyBub3QgeWV0IGltcGxlbWVudGVkIGZvciB1bmZpbGxlZG91dCBjb21tYW5kcycsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGxldCByZXMgPSBhd2FpdCByZXF1ZXN0KHtcbiAgICAgICAgdXJsOiBgJHtiYXNlVXJsfS9zZXNzaW9uL2Zvby9lbGVtZW50L2Jhci9sb2NhdGlvbmAsXG4gICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgIGpzb246IHRydWUsXG4gICAgICAgIHJlc29sdmVXaXRoRnVsbFJlc3BvbnNlOiB0cnVlLFxuICAgICAgICBzaW1wbGU6IGZhbHNlXG4gICAgICB9KTtcblxuICAgICAgcmVzLnN0YXR1c0NvZGUuc2hvdWxkLmVxdWFsKDUwMSk7XG4gICAgICByZXMuYm9keS5zaG91bGQuZXFsKHtcbiAgICAgICAgc3RhdHVzOiAxMyxcbiAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICBtZXNzYWdlOiAnTWV0aG9kIGhhcyBub3QgeWV0IGJlZW4gaW1wbGVtZW50ZWQnXG4gICAgICAgIH0sXG4gICAgICAgIHNlc3Npb25JZDogJ2ZvbydcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB0aHJvdyBub3QgaW1wbGVtZW50ZWQgZm9yIGlnbm9yZWQgY29tbWFuZHMnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBsZXQgcmVzID0gYXdhaXQgcmVxdWVzdCh7XG4gICAgICAgIHVybDogYCR7YmFzZVVybH0vc2Vzc2lvbi9mb28vYnV0dG9udXBgLFxuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAganNvbjoge30sXG4gICAgICAgIHJlc29sdmVXaXRoRnVsbFJlc3BvbnNlOiB0cnVlLFxuICAgICAgICBzaW1wbGU6IGZhbHNlXG4gICAgICB9KTtcblxuICAgICAgcmVzLnN0YXR1c0NvZGUuc2hvdWxkLmVxdWFsKDUwMSk7XG4gICAgICByZXMuYm9keS5zaG91bGQuZXFsKHtcbiAgICAgICAgc3RhdHVzOiAxMyxcbiAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICBtZXNzYWdlOiAnTWV0aG9kIGlzIG5vdCBpbXBsZW1lbnRlZCdcbiAgICAgICAgfSxcbiAgICAgICAgc2Vzc2lvbklkOiAnZm9vJ1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGdldCA0MDAgZm9yIGJhZCBwYXJhbWV0ZXJzJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgYXdhaXQgcmVxdWVzdCh7XG4gICAgICAgIHVybDogYCR7YmFzZVVybH0vc2Vzc2lvbi9mb28vdXJsYCxcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGpzb246IHt9XG4gICAgICB9KS5zaG91bGQuZXZlbnR1YWxseS5iZS5yZWplY3RlZFdpdGgoXCI0MDBcIik7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGlnbm9yZSBzcGVjaWFsIGV4dHJhIHBheWxvYWQgcGFyYW1zIGluIHRoZSByaWdodCBjb250ZXh0cycsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGF3YWl0IHJlcXVlc3Qoe1xuICAgICAgICB1cmw6IGAke2Jhc2VVcmx9L3Nlc3Npb24vZm9vL2VsZW1lbnQvYmFyL3ZhbHVlYCxcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGpzb246IHtpZDogJ2JheicsIHNlc3Npb25JZDogJ2xvbCcsIHZhbHVlOiBbJ2EnXX1cbiAgICAgIH0pO1xuXG4gICAgICBhd2FpdCByZXF1ZXN0KHtcbiAgICAgICAgdXJsOiBgJHtiYXNlVXJsfS9zZXNzaW9uL2Zvby9lbGVtZW50L2Jhci92YWx1ZWAsXG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBqc29uOiB7aWQ6ICdiYXonfVxuICAgICAgfSkuc2hvdWxkLmV2ZW50dWFsbHkuYmUucmVqZWN0ZWRXaXRoKFwiNDAwXCIpO1xuXG4gICAgICAvLyBtYWtlIHN1cmUgYWRkaW5nIHRoZSBvcHRpb25hbCAnaWQnIGRvZXNuJ3QgY2xvYmJlciBhIHJvdXRlIHdoZXJlIHdlXG4gICAgICAvLyBoYXZlIGFuIGFjdHVhbCByZXF1aXJlZCAnaWQnXG4gICAgICBhd2FpdCByZXF1ZXN0KHtcbiAgICAgICAgdXJsOiBgJHtiYXNlVXJsfS9zZXNzaW9uL2Zvby9mcmFtZWAsXG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBqc29uOiB7aWQ6ICdiYXonfVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiB0aGUgY29ycmVjdCBlcnJvciBldmVuIGlmIGRyaXZlciBkb2VzIG5vdCB0aHJvdycsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGxldCByZXMgPSAgYXdhaXQgcmVxdWVzdCh7XG4gICAgICAgIHVybDogYCR7YmFzZVVybH0vc2Vzc2lvbi9mb28vYXBwaXVtL3JlY2VpdmVfYXN5bmNfcmVzcG9uc2VgLFxuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAganNvbjoge3Jlc3BvbnNlOiAnYmF6J30sXG4gICAgICAgIHJlc29sdmVXaXRoRnVsbFJlc3BvbnNlOiB0cnVlLFxuICAgICAgICBzaW1wbGU6IGZhbHNlXG4gICAgICB9KTtcbiAgICAgIHJlcy5zdGF0dXNDb2RlLnNob3VsZC5lcXVhbCg1MDApO1xuICAgICAgcmVzLmJvZHkuc2hvdWxkLmVxbCh7XG4gICAgICAgIHN0YXR1czogMTMsXG4gICAgICAgIHZhbHVlOiB7XG4gICAgICAgICAgbWVzc2FnZTogJ0FuIHVua25vd24gc2VydmVyLXNpZGUgZXJyb3Igb2NjdXJyZWQgd2hpbGUgcHJvY2Vzc2luZyAnICtcbiAgICAgICAgICAgICAgICAgICAndGhlIGNvbW1hbmQuIE9yaWdpbmFsIGVycm9yOiBNaXNoYW5kbGVkIERyaXZlciBFcnJvcidcbiAgICAgICAgfSxcbiAgICAgICAgc2Vzc2lvbklkOiBcImZvb1wiXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCd3M2Mgc2VuZGtleXMgbWlncmF0aW9uJywgZnVuY3Rpb24gKCkge1xuICAgICAgaXQoJ3Nob3VsZCBhY2NlcHQgdmFsdWUgZm9yIHNlbmRrZXlzJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgICBsZXQgcmVzID0gYXdhaXQgcmVxdWVzdCh7XG4gICAgICAgICAgdXJsOiBgJHtiYXNlVXJsfS9zZXNzaW9uL2Zvby9lbGVtZW50L2Jhci92YWx1ZWAsXG4gICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAganNvbjoge3ZhbHVlOiBcInRleHQgdG8gdHlwZVwifVxuICAgICAgICB9KTtcbiAgICAgICAgcmVzLnN0YXR1cy5zaG91bGQuZXF1YWwoMCk7XG4gICAgICAgIHJlcy52YWx1ZS5zaG91bGQuZXFsKFtcInRleHQgdG8gdHlwZVwiLCBcImJhclwiXSk7XG4gICAgICB9KTtcbiAgICAgIGl0KCdzaG91bGQgYWNjZXB0IHRleHQgZm9yIHNlbmRrZXlzJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgICBsZXQgcmVzID0gYXdhaXQgcmVxdWVzdCh7XG4gICAgICAgICAgdXJsOiBgJHtiYXNlVXJsfS9zZXNzaW9uL2Zvby9lbGVtZW50L2Jhci92YWx1ZWAsXG4gICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAganNvbjoge3RleHQ6IFwidGV4dCB0byB0eXBlXCJ9XG4gICAgICAgIH0pO1xuICAgICAgICByZXMuc3RhdHVzLnNob3VsZC5lcXVhbCgwKTtcbiAgICAgICAgcmVzLnZhbHVlLnNob3VsZC5lcWwoW1widGV4dCB0byB0eXBlXCIsIFwiYmFyXCJdKTtcbiAgICAgIH0pO1xuICAgICAgaXQoJ3Nob3VsZCBhY2NlcHQgdmFsdWUgYW5kIHRleHQgZm9yIHNlbmRrZXlzLCBhbmQgdXNlIHZhbHVlJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgICBsZXQgcmVzID0gYXdhaXQgcmVxdWVzdCh7XG4gICAgICAgICAgdXJsOiBgJHtiYXNlVXJsfS9zZXNzaW9uL2Zvby9lbGVtZW50L2Jhci92YWx1ZWAsXG4gICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAganNvbjoge3ZhbHVlOiBcInRleHQgdG8gdHlwZVwiLCB0ZXh0OiBcInRleHQgdG8gaWdub3JlXCJ9XG4gICAgICAgIH0pO1xuICAgICAgICByZXMuc3RhdHVzLnNob3VsZC5lcXVhbCgwKTtcbiAgICAgICAgcmVzLnZhbHVlLnNob3VsZC5lcWwoW1widGV4dCB0byB0eXBlXCIsIFwiYmFyXCJdKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ211bHRpcGxlIHNldHMgb2YgYXJndW1lbnRzJywgZnVuY3Rpb24gKCkge1xuICAgICAgZGVzY3JpYmUoJ29wdGlvbmFsJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBpdCgnc2hvdWxkIGFsbG93IG1vdmV0byB3aXRoIGVsZW1lbnQnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgbGV0IHJlcyA9IGF3YWl0IHJlcXVlc3Qoe1xuICAgICAgICAgICAgdXJsOiBgJHtiYXNlVXJsfS9zZXNzaW9uL2Zvby9tb3ZldG9gLFxuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICBqc29uOiB7ZWxlbWVudDogJzMnfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJlcy5zdGF0dXMuc2hvdWxkLmVxdWFsKDApO1xuICAgICAgICAgIHJlcy52YWx1ZS5zaG91bGQuZXFsKFsnMycsIG51bGwsIG51bGxdKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGl0KCdzaG91bGQgYWxsb3cgbW92ZXRvIHdpdGggeG9mZnNldC95b2Zmc2V0JywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGxldCByZXMgPSBhd2FpdCByZXF1ZXN0KHtcbiAgICAgICAgICAgIHVybDogYCR7YmFzZVVybH0vc2Vzc2lvbi9mb28vbW92ZXRvYCxcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAganNvbjoge3hvZmZzZXQ6IDQyLCB5b2Zmc2V0OiAxN31cbiAgICAgICAgICB9KTtcbiAgICAgICAgICByZXMuc3RhdHVzLnNob3VsZC5lcXVhbCgwKTtcbiAgICAgICAgICByZXMudmFsdWUuc2hvdWxkLmVxbChbbnVsbCwgNDIsIDE3XSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICBkZXNjcmliZSgncmVxdWlyZWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGl0KCdzaG91bGQgYWxsb3cgcmVtb3ZlQXBwIHdpdGggYXBwSWQnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgbGV0IHJlcyA9IGF3YWl0IHJlcXVlc3Qoe1xuICAgICAgICAgICAgdXJsOiBgJHtiYXNlVXJsfS9zZXNzaW9uL2Zvby9hcHBpdW0vZGV2aWNlL3JlbW92ZV9hcHBgLFxuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICBqc29uOiB7YXBwSWQ6IDQyfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJlcy5zdGF0dXMuc2hvdWxkLmVxdWFsKDApO1xuICAgICAgICAgIHJlcy52YWx1ZS5zaG91bGQuZXFsKDQyKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGl0KCdzaG91bGQgYWxsb3cgcmVtb3ZlQXBwIHdpdGggYnVuZGxlSWQnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgbGV0IHJlcyA9IGF3YWl0IHJlcXVlc3Qoe1xuICAgICAgICAgICAgdXJsOiBgJHtiYXNlVXJsfS9zZXNzaW9uL2Zvby9hcHBpdW0vZGV2aWNlL3JlbW92ZV9hcHBgLFxuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICBqc29uOiB7YnVuZGxlSWQ6IDQyfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJlcy5zdGF0dXMuc2hvdWxkLmVxdWFsKDApO1xuICAgICAgICAgIHJlcy52YWx1ZS5zaG91bGQuZXFsKDQyKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdkZWZhdWx0IHBhcmFtIHdyYXAnLCBmdW5jdGlvbiAoKSB7XG4gICAgICBpdCgnc2hvdWxkIHdyYXAnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGxldCByZXMgPSBhd2FpdCByZXF1ZXN0KHtcbiAgICAgICAgICB1cmw6IGAke2Jhc2VVcmx9L3Nlc3Npb24vZm9vL3RvdWNoL3BlcmZvcm1gLFxuICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgIGpzb246IFt7XCJhY3Rpb25cIjpcInRhcFwiLCBcIm9wdGlvbnNcIjp7XCJlbGVtZW50XCI6XCIzXCJ9fV1cbiAgICAgICAgfSk7XG4gICAgICAgIHJlcy52YWx1ZS5zaG91bGQuZGVlcC5lcXVhbChbW3tcImFjdGlvblwiOlwidGFwXCIsIFwib3B0aW9uc1wiOntcImVsZW1lbnRcIjpcIjNcIn19XSwgJ2ZvbyddKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIG5vdCB3cmFwIHR3aWNlJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgICBsZXQgcmVzID0gYXdhaXQgcmVxdWVzdCh7XG4gICAgICAgICAgdXJsOiBgJHtiYXNlVXJsfS9zZXNzaW9uL2Zvby90b3VjaC9wZXJmb3JtYCxcbiAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICBqc29uOiB7YWN0aW9uczogW3tcImFjdGlvblwiOlwidGFwXCIsIFwib3B0aW9uc1wiOntcImVsZW1lbnRcIjpcIjNcIn19XX1cbiAgICAgICAgfSk7XG4gICAgICAgIHJlcy52YWx1ZS5zaG91bGQuZGVlcC5lcXVhbChbW3tcImFjdGlvblwiOlwidGFwXCIsIFwib3B0aW9uc1wiOntcImVsZW1lbnRcIjpcIjNcIn19XSwgJ2ZvbyddKTtcbiAgICAgIH0pO1xuXG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnY3JlYXRlIHNlc3Npb25zIHZpYSBIVFRQIGVuZHBvaW50JywgZnVuY3Rpb24gKCkge1xuICAgICAgbGV0IGRlc2lyZWRDYXBhYmlsaXRpZXMgPSB7YTogJ2InfTtcbiAgICAgIGxldCByZXF1aXJlZENhcGFiaWxpdGllcyA9IHtjOiAnZCd9O1xuICAgICAgbGV0IGNhcGFiaWxpdGllcyA9IHtlOiAnZid9O1xuXG4gICAgICBsZXQgc2Vzc2lvbklkO1xuXG4gICAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc2Vzc2lvbklkID0gbnVsbDtcbiAgICAgIH0pO1xuICAgICAgYWZ0ZXJFYWNoKGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHNlc3Npb25JZCkge1xuICAgICAgICAgIGF3YWl0IHJlcXVlc3QuZGVsZXRlKGAke2Jhc2VVcmx9L3Nlc3Npb24vJHtzZXNzaW9uSWR9YCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGFsbG93IGNyZWF0ZSBzZXNzaW9uIHdpdGggZGVzaXJlZCBjYXBzIChNSlNPTldQKScsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgbGV0IHJlcyA9IGF3YWl0IHJlcXVlc3Qoe1xuICAgICAgICAgIHVybDogYCR7YmFzZVVybH0vc2Vzc2lvbmAsXG4gICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAganNvbjoge2Rlc2lyZWRDYXBhYmlsaXRpZXN9XG4gICAgICAgIH0pO1xuICAgICAgICBzZXNzaW9uSWQgPSByZXMuc2Vzc2lvbklkO1xuXG4gICAgICAgIHJlcy5zdGF0dXMuc2hvdWxkLmVxdWFsKDApO1xuICAgICAgICByZXMudmFsdWUuc2hvdWxkLmVxbChkZXNpcmVkQ2FwYWJpbGl0aWVzKTtcbiAgICAgIH0pO1xuICAgICAgaXQoJ3Nob3VsZCBhbGxvdyBjcmVhdGUgc2Vzc2lvbiB3aXRoIGRlc2lyZWQgYW5kIHJlcXVpcmVkIGNhcHMnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGxldCByZXMgPSBhd2FpdCByZXF1ZXN0KHtcbiAgICAgICAgICB1cmw6IGAke2Jhc2VVcmx9L3Nlc3Npb25gLFxuICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgIGpzb246IHtcbiAgICAgICAgICAgIGRlc2lyZWRDYXBhYmlsaXRpZXMsXG4gICAgICAgICAgICByZXF1aXJlZENhcGFiaWxpdGllc1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHNlc3Npb25JZCA9IHJlcy5zZXNzaW9uSWQ7XG5cbiAgICAgICAgcmVzLnN0YXR1cy5zaG91bGQuZXF1YWwoMCk7XG4gICAgICAgIHJlcy52YWx1ZS5zaG91bGQuZXFsKF8uZXh0ZW5kKHt9LCBkZXNpcmVkQ2FwYWJpbGl0aWVzLCByZXF1aXJlZENhcGFiaWxpdGllcykpO1xuICAgICAgfSk7XG4gICAgICBpdCgnc2hvdWxkIGZhaWwgdG8gY3JlYXRlIHNlc3Npb24gd2l0aG91dCBjYXBhYmlsaXRpZXMgb3IgZGVzaXJlZENhcGFiaWxpdGllcycsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgYXdhaXQgcmVxdWVzdCh7XG4gICAgICAgICAgdXJsOiBgJHtiYXNlVXJsfS9zZXNzaW9uYCxcbiAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICBqc29uOiB7fSxcbiAgICAgICAgfSkuc2hvdWxkLmV2ZW50dWFsbHkuYmUucmVqZWN0ZWRXaXRoKCc0MDAnKTtcbiAgICAgIH0pO1xuICAgICAgaXQoJ3Nob3VsZCBhbGxvdyBjcmVhdGUgc2Vzc2lvbiB3aXRoIGNhcGFiaWxpdGllcyAoVzNDKScsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gbGV0IHtzdGF0dXMsIHZhbHVlLCBzZXNzaW9uSWR9ID0gYXdhaXQgcmVxdWVzdCh7XG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHJlcXVlc3Qoe1xuICAgICAgICAgIHVybDogYCR7YmFzZVVybH0vc2Vzc2lvbmAsXG4gICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAganNvbjoge1xuICAgICAgICAgICAgY2FwYWJpbGl0aWVzLFxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHNlc3Npb25JZCA9IHJlcy5zZXNzaW9uSWQ7XG5cbiAgICAgICAgc2hvdWxkLm5vdC5leGlzdChyZXMuc3RhdHVzKTtcbiAgICAgICAgc2hvdWxkLm5vdC5leGlzdChyZXMuc2Vzc2lvbklkKTtcbiAgICAgICAgcmVzLnZhbHVlLmNhcGFiaWxpdGllcy5zaG91bGQuZXFsKGNhcGFiaWxpdGllcyk7XG4gICAgICAgIHJlcy52YWx1ZS5zZXNzaW9uSWQuc2hvdWxkLmV4aXN0O1xuICAgICAgfSk7XG4gICAgICBpdCgnc2hvdWxkIGZhbGwgYmFjayB0byBNSlNPTldQIGlmIGRyaXZlciBkb2VzIG5vdCBzdXBwb3J0IFczQyB5ZXQnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnN0IGNyZWF0ZVNlc3Npb25TdHViID0gc2lub24uc3R1Yihkcml2ZXIsICdjcmVhdGVTZXNzaW9uJykuY2FsbHNGYWtlKGZ1bmN0aW9uIChjYXBhYmlsaXRpZXMpIHtcbiAgICAgICAgICBkcml2ZXIuc2Vzc2lvbklkID0gbnVsbDtcbiAgICAgICAgICByZXR1cm4gQmFzZURyaXZlci5wcm90b3R5cGUuY3JlYXRlU2Vzc2lvbi5jYWxsKGRyaXZlciwgY2FwYWJpbGl0aWVzKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGxldCBjYXBzID0ge1xuICAgICAgICAgIC4uLmRlc2lyZWRDYXBhYmlsaXRpZXMsXG4gICAgICAgICAgcGxhdGZvcm1OYW1lOiAnRmFrZScsXG4gICAgICAgICAgZGV2aWNlTmFtZTogJ0Zha2UnLFxuICAgICAgICB9O1xuICAgICAgICAvLyBsZXQge3N0YXR1cywgdmFsdWUsIHNlc3Npb25JZH0gPSBhd2FpdCByZXF1ZXN0KHtcbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgcmVxdWVzdCh7XG4gICAgICAgICAgdXJsOiBgJHtiYXNlVXJsfS9zZXNzaW9uYCxcbiAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICBqc29uOiB7XG4gICAgICAgICAgICBkZXNpcmVkQ2FwYWJpbGl0aWVzOiBjYXBzLFxuICAgICAgICAgICAgY2FwYWJpbGl0aWVzOiB7XG4gICAgICAgICAgICAgIGFsd2F5c01hdGNoOiBjYXBzLFxuICAgICAgICAgICAgICBmaXJzdE1hdGNoOiBbe31dLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBzZXNzaW9uSWQgPSByZXMuc2Vzc2lvbklkO1xuXG4gICAgICAgIHNob3VsZC5leGlzdChyZXMuc3RhdHVzKTtcbiAgICAgICAgc2hvdWxkLmV4aXN0KHJlcy5zZXNzaW9uSWQpO1xuICAgICAgICByZXMudmFsdWUuc2hvdWxkLmVxbChjYXBzKTtcbiAgICAgICAgY3JlYXRlU2Vzc2lvblN0dWIucmVzdG9yZSgpO1xuICAgICAgfSk7XG5cbiAgICAgIGRlc2NyaWJlKCd3M2MgZW5kcG9pbnRzJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgICBsZXQgdzNjQ2FwcyA9IHtcbiAgICAgICAgICBhbHdheXNNYXRjaDoge1xuICAgICAgICAgICAgcGxhdGZvcm1OYW1lOiAnRmFrZScsXG4gICAgICAgICAgICBkZXZpY2VOYW1lOiAnQ29tbW9kb3JlIDY0JyxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGZpcnN0TWF0Y2g6IFt7fV0sXG4gICAgICAgIH07XG4gICAgICAgIGxldCBzZXNzaW9uVXJsO1xuXG4gICAgICAgIGJlZm9yZUVhY2goYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIC8vIFN0YXJ0IGEgc2Vzc2lvblxuICAgICAgICAgIGxldCB7dmFsdWV9ID0gYXdhaXQgcmVxdWVzdC5wb3N0KGAke2Jhc2VVcmx9L3Nlc3Npb25gLCB7XG4gICAgICAgICAgICBqc29uOiB7XG4gICAgICAgICAgICAgIGNhcGFiaWxpdGllczogdzNjQ2FwcyxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzZXNzaW9uSWQgPSB2YWx1ZS5zZXNzaW9uSWQ7XG4gICAgICAgICAgc2Vzc2lvblVybCA9IGAke2Jhc2VVcmx9L3Nlc3Npb24vJHtzZXNzaW9uSWR9YDtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoYHNob3VsZCB0aHJvdyA0MDAgQmFkIFBhcmFtZXRlcnMgZXhjZXB0aW9uIGlmIHRoZSBwYXJhbWV0ZXJzIGFyZSBiYWRgLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgY29uc3Qge3N0YXR1c0NvZGUsIGVycm9yfSA9IGF3YWl0IHJlcXVlc3QucG9zdChgJHtzZXNzaW9uVXJsfS9hY3Rpb25zYCwge1xuICAgICAgICAgICAganNvbjoge1xuICAgICAgICAgICAgICBiYWQ6ICdwYXJhbXMnLFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pLnNob3VsZC5ldmVudHVhbGx5LmJlLnJlamVjdGVkO1xuICAgICAgICAgIHN0YXR1c0NvZGUuc2hvdWxkLmVxdWFsKDQwMCk7XG5cbiAgICAgICAgICBjb25zdCB7ZXJyb3I6dzNjRXJyb3IsIG1lc3NhZ2UsIHN0YWNrdHJhY2V9ID0gZXJyb3IudmFsdWU7XG4gICAgICAgICAgbWVzc2FnZS5zaG91bGQubWF0Y2goL1BhcmFtZXRlcnMgd2VyZSBpbmNvcnJlY3QvKTtcbiAgICAgICAgICBzdGFja3RyYWNlLnNob3VsZC5tYXRjaCgvcHJvdG9jb2wuanMvKTtcbiAgICAgICAgICB3M2NFcnJvci5zaG91bGQuYmUuYS5zdHJpbmc7XG4gICAgICAgICAgdzNjRXJyb3Iuc2hvdWxkLmVxdWFsKGVycm9ycy5JbnZhbGlkQXJndW1lbnRFcnJvci5lcnJvcigpKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoYHNob3VsZCB0aHJvdyA0MDQgTm90IEZvdW5kIGV4Y2VwdGlvbiBpZiB0aGUgY29tbWFuZCBoYXNuJ3QgYmVlbiBpbXBsZW1lbnRlZCB5ZXRgLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgY29uc3Qge3N0YXR1c0NvZGUsIGVycm9yfSA9IGF3YWl0IHJlcXVlc3QucG9zdChgJHtzZXNzaW9uVXJsfS9hY3Rpb25zYCwge1xuICAgICAgICAgICAganNvbjoge1xuICAgICAgICAgICAgICBhY3Rpb25zOiBbXSxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KS5zaG91bGQuZXZlbnR1YWxseS5iZS5yZWplY3RlZDtcbiAgICAgICAgICBzdGF0dXNDb2RlLnNob3VsZC5lcXVhbCg0MDQpO1xuXG4gICAgICAgICAgY29uc3Qge2Vycm9yOnczY0Vycm9yLCBtZXNzYWdlLCBzdGFja3RyYWNlfSA9IGVycm9yLnZhbHVlO1xuICAgICAgICAgIG1lc3NhZ2Uuc2hvdWxkLm1hdGNoKC9NZXRob2QgaGFzIG5vdCB5ZXQgYmVlbiBpbXBsZW1lbnRlZC8pO1xuICAgICAgICAgIHN0YWNrdHJhY2Uuc2hvdWxkLm1hdGNoKC9wcm90b2NvbC5qcy8pO1xuICAgICAgICAgIHczY0Vycm9yLnNob3VsZC5iZS5hLnN0cmluZztcbiAgICAgICAgICB3M2NFcnJvci5zaG91bGQuZXF1YWwoZXJyb3JzLk5vdFlldEltcGxlbWVudGVkRXJyb3IuZXJyb3IoKSk7XG4gICAgICAgICAgbWVzc2FnZS5zaG91bGQubWF0Y2goL01ldGhvZCBoYXMgbm90IHlldCBiZWVuIGltcGxlbWVudGVkLyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KGBzaG91bGQgdGhyb3cgNTAwIFVua25vd24gRXJyb3IgaWYgdGhlIGNvbW1hbmQgdGhyb3dzIGFuIHVuZXhwZWN0ZWQgZXhjZXB0aW9uYCwgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGRyaXZlci5wZXJmb3JtQWN0aW9ucyA9ICgpID0+IHsgdGhyb3cgbmV3IEVycm9yKGBEaWRuJ3Qgd29ya2ApOyB9O1xuICAgICAgICAgIGNvbnN0IHtzdGF0dXNDb2RlLCBlcnJvcn0gPSBhd2FpdCByZXF1ZXN0LnBvc3QoYCR7c2Vzc2lvblVybH0vYWN0aW9uc2AsIHtcbiAgICAgICAgICAgIGpzb246IHtcbiAgICAgICAgICAgICAgYWN0aW9uczogW10sXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSkuc2hvdWxkLmV2ZW50dWFsbHkuYmUucmVqZWN0ZWQ7XG4gICAgICAgICAgc3RhdHVzQ29kZS5zaG91bGQuZXF1YWwoNTAwKTtcblxuICAgICAgICAgIGNvbnN0IHtlcnJvcjp3M2NFcnJvciwgbWVzc2FnZSwgc3RhY2t0cmFjZX0gPSBlcnJvci52YWx1ZTtcbiAgICAgICAgICBzdGFja3RyYWNlLnNob3VsZC5tYXRjaCgvcHJvdG9jb2wuanMvKTtcbiAgICAgICAgICB3M2NFcnJvci5zaG91bGQuYmUuYS5zdHJpbmc7XG4gICAgICAgICAgdzNjRXJyb3Iuc2hvdWxkLmVxdWFsKGVycm9ycy5Vbmtub3duRXJyb3IuZXJyb3IoKSk7XG4gICAgICAgICAgbWVzc2FnZS5zaG91bGQubWF0Y2goL0RpZG4ndCB3b3JrLyk7XG5cbiAgICAgICAgICBkZWxldGUgZHJpdmVyLnBlcmZvcm1BY3Rpb25zO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdChgc2hvdWxkIHRyYW5zbGF0ZSBlbGVtZW50IGZvcm1hdCBmcm9tIE1KU09OV1AgdG8gVzNDYCwgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGNvbnN0IHJldFZhbHVlID0gW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBzb21ldGhpbmc6IHtcbiAgICAgICAgICAgICAgICBbTUpTT05XUF9FTEVNRU5UX0tFWV06ICdmb29vJyxcbiAgICAgICAgICAgICAgICBvdGhlcjogJ2JhcidcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICBbTUpTT05XUF9FTEVNRU5UX0tFWV06ICdiYXInXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ2lnbm9yZScsXG4gICAgICAgICAgXTtcblxuICAgICAgICAgIGNvbnN0IGV4cGVjdGVkVmFsdWUgPSBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHNvbWV0aGluZzoge1xuICAgICAgICAgICAgICAgIFtXM0NfRUxFTUVOVF9LRVldOiAnZm9vbycsXG4gICAgICAgICAgICAgICAgb3RoZXI6ICdiYXInXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgW1czQ19FTEVNRU5UX0tFWV06ICdiYXInXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ2lnbm9yZScsXG4gICAgICAgICAgXTtcblxuICAgICAgICAgIGNvbnN0IGZpbmRFbGVtZW50c0JhY2t1cCA9IGRyaXZlci5maW5kRWxlbWVudHM7XG4gICAgICAgICAgZHJpdmVyLmZpbmRFbGVtZW50cyA9ICgpID0+IHJldFZhbHVlO1xuICAgICAgICAgIGNvbnN0IHt2YWx1ZX0gPSBhd2FpdCByZXF1ZXN0LnBvc3QoYCR7c2Vzc2lvblVybH0vZWxlbWVudHNgLCB7XG4gICAgICAgICAgICBqc29uOiB7XG4gICAgICAgICAgICAgIHVzaW5nOiAnd2hhdGV2ZXInLFxuICAgICAgICAgICAgICB2YWx1ZTogJ3doYXRldmVyJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdmFsdWUuc2hvdWxkLmRlZXAuZXF1YWwoZXhwZWN0ZWRWYWx1ZSk7XG4gICAgICAgICAgZHJpdmVyLmZpbmRFbGVtZW50cyA9IGZpbmRFbGVtZW50c0JhY2t1cDtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoYHNob3VsZCBmYWlsIHdpdGggYSA0MDggZXJyb3IgaWYgaXQgdGhyb3dzIGEgVGltZW91dEVycm9yIGV4Y2VwdGlvbmAsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBsZXQgc2V0VXJsU3R1YiA9IHNpbm9uLnN0dWIoZHJpdmVyLCAnc2V0VXJsJykuY2FsbHNGYWtlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcnMuVGltZW91dEVycm9yO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIGxldCB7c3RhdHVzQ29kZSwgZXJyb3J9ID0gYXdhaXQgcmVxdWVzdCh7XG4gICAgICAgICAgICB1cmw6IGAke3Nlc3Npb25Vcmx9L3VybGAsXG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgIGpzb246IHtcbiAgICAgICAgICAgICAgdXJsOiAnaHR0cHM6Ly9leGFtcGxlLmNvbS8nLFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pLnNob3VsZC5ldmVudHVhbGx5LmJlLnJlamVjdGVkO1xuICAgICAgICAgIHN0YXR1c0NvZGUuc2hvdWxkLmVxdWFsKDQwOCk7XG5cbiAgICAgICAgICBjb25zdCB7ZXJyb3I6dzNjRXJyb3IsIG1lc3NhZ2UsIHN0YWNrdHJhY2V9ID0gZXJyb3IudmFsdWU7XG4gICAgICAgICAgc3RhY2t0cmFjZS5zaG91bGQubWF0Y2goL3Byb3RvY29sLmpzLyk7XG4gICAgICAgICAgdzNjRXJyb3Iuc2hvdWxkLmJlLmEuc3RyaW5nO1xuICAgICAgICAgIHczY0Vycm9yLnNob3VsZC5lcXVhbChlcnJvcnMuVGltZW91dEVycm9yLmVycm9yKCkpO1xuICAgICAgICAgIG1lc3NhZ2Uuc2hvdWxkLm1hdGNoKC9BbiBvcGVyYXRpb24gZGlkIG5vdCBjb21wbGV0ZSBiZWZvcmUgaXRzIHRpbWVvdXQgZXhwaXJlZC8pO1xuXG4gICAgICAgICAgc2V0VXJsU3R1Yi5yZXN0b3JlKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KGBzaG91bGQgcGFzcyB3aXRoIDIwMCBIVFRQIHN0YXR1cyBjb2RlIGlmIHRoZSBjb21tYW5kIHJldHVybnMgYSB2YWx1ZWAsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBkcml2ZXIucGVyZm9ybUFjdGlvbnMgPSAoYWN0aW9ucykgPT4gJ0l0IHdvcmtzICcgKyBhY3Rpb25zLmpvaW4oJycpO1xuICAgICAgICAgIGNvbnN0IHtzdGF0dXMsIHZhbHVlLCBzZXNzaW9uSWR9ID0gYXdhaXQgcmVxdWVzdC5wb3N0KGAke3Nlc3Npb25Vcmx9L2FjdGlvbnNgLCB7XG4gICAgICAgICAgICBqc29uOiB7XG4gICAgICAgICAgICAgIGFjdGlvbnM6IFsnYScsICdiJywgJ2MnXSxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzaG91bGQubm90LmV4aXN0KHNlc3Npb25JZCk7XG4gICAgICAgICAgc2hvdWxkLm5vdC5leGlzdChzdGF0dXMpO1xuICAgICAgICAgIHZhbHVlLnNob3VsZC5lcXVhbCgnSXQgd29ya3MgYWJjJyk7XG4gICAgICAgICAgZGVsZXRlIGRyaXZlci5wZXJmb3JtQWN0aW9ucztcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZGVzY3JpYmUoJ2p3cHJveHknLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgY29uc3QgcG9ydCA9IDU2NTYyO1xuICAgICAgICAgIGxldCBzZXJ2ZXIsIGp3cHJveHksIGFwcDtcblxuICAgICAgICAgIGJlZm9yZUVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY29uc3QgcmVzID0gY3JlYXRlUHJveHlTZXJ2ZXIoc2Vzc2lvbklkLCBwb3J0KTtcbiAgICAgICAgICAgIHNlcnZlciA9IHJlcy5zZXJ2ZXI7XG4gICAgICAgICAgICBhcHAgPSByZXMuYXBwO1xuICAgICAgICAgICAgandwcm94eSA9IG5ldyBKV1Byb3h5KHtob3N0OiAnbG9jYWxob3N0JywgcG9ydH0pO1xuICAgICAgICAgICAgandwcm94eS5zZXNzaW9uSWQgPSBzZXNzaW9uSWQ7XG4gICAgICAgICAgICBkcml2ZXIucGVyZm9ybUFjdGlvbnMgPSBhc3luYyAoYWN0aW9ucykgPT4gYXdhaXQgandwcm94eS5jb21tYW5kKCcvcGVyZm9ybS1hY3Rpb25zJywgJ1BPU1QnLCBhY3Rpb25zKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGFmdGVyRWFjaChhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBkZWxldGUgZHJpdmVyLnBlcmZvcm1BY3Rpb25zO1xuICAgICAgICAgICAgYXdhaXQgc2VydmVyLmNsb3NlKCk7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBpdCgnc2hvdWxkIHdvcmsgaWYgYSBwcm94aWVkIHJlcXVlc3QgcmV0dXJucyBhIHJlc3BvbnNlIHdpdGggc3RhdHVzIDIwMCcsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGFkZEhhbmRsZXIoYXBwLCAncG9zdCcsICcvd2QvaHViL3Nlc3Npb24vOnNlc3Npb25JZC9wZXJmb3JtLWFjdGlvbnMnLCAocmVxLCByZXMpID0+IHtcbiAgICAgICAgICAgICAgcmVzLmpzb24oe1xuICAgICAgICAgICAgICAgIHNlc3Npb25JZDogcmVxLnBhcmFtcy5zZXNzaW9uSWQsXG4gICAgICAgICAgICAgICAgdmFsdWU6IHJlcS5ib2R5LFxuICAgICAgICAgICAgICAgIHN0YXR1czogMCxcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgY29uc3Qge3N0YXR1cywgdmFsdWUsIHNlc3Npb25JZH0gPSBhd2FpdCByZXF1ZXN0LnBvc3QoYCR7c2Vzc2lvblVybH0vYWN0aW9uc2AsIHtcbiAgICAgICAgICAgICAganNvbjoge1xuICAgICAgICAgICAgICAgIGFjdGlvbnM6IFsxLCAyLCAzXSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdmFsdWUuc2hvdWxkLmVxbChbMSwgMiwgM10pO1xuICAgICAgICAgICAgc2hvdWxkLm5vdC5leGlzdChzdGF0dXMpO1xuICAgICAgICAgICAgc2hvdWxkLm5vdC5leGlzdChzZXNzaW9uSWQpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgaXQoJ3Nob3VsZCByZXR1cm4gZXJyb3IgaWYgYSBwcm94aWVkIHJlcXVlc3QgcmV0dXJucyBhIE1KU09OV1AgZXJyb3IgcmVzcG9uc2UnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBhZGRIYW5kbGVyKGFwcCwgJ3Bvc3QnLCAnL3dkL2h1Yi9zZXNzaW9uLzpzZXNzaW9uSWQvcGVyZm9ybS1hY3Rpb25zJywgKHJlcSwgcmVzKSA9PiB7XG4gICAgICAgICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgICAgICAgICAgICBzZXNzaW9uSWQsXG4gICAgICAgICAgICAgICAgc3RhdHVzOiA2LFxuICAgICAgICAgICAgICAgIHZhbHVlOiAnQSBwcm9ibGVtIG9jY3VycmVkJyxcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IHtzdGF0dXNDb2RlLCBtZXNzYWdlfSA9IGF3YWl0IHJlcXVlc3QucG9zdChgJHtzZXNzaW9uVXJsfS9hY3Rpb25zYCwge1xuICAgICAgICAgICAgICBqc29uOiB7XG4gICAgICAgICAgICAgICAgYWN0aW9uczogWzEsIDIsIDNdLFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KS5zaG91bGQuZXZlbnR1YWxseS5iZS5yZWplY3RlZDtcbiAgICAgICAgICAgIHN0YXR1c0NvZGUuc2hvdWxkLmVxdWFsKEhUVFBTdGF0dXNDb2Rlcy5OT1RfRk9VTkQpO1xuICAgICAgICAgICAgbWVzc2FnZS5zaG91bGQubWF0Y2goL0EgcHJvYmxlbSBvY2N1cnJlZC8pO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgaXQoJ3Nob3VsZCByZXR1cm4gVzNDIGVycm9yIGlmIGEgcHJveGllZCByZXF1ZXN0IHJldHVybnMgYSBXM0MgZXJyb3IgcmVzcG9uc2UnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcihgU29tZSBlcnJvciBvY2N1cnJlZGApO1xuICAgICAgICAgICAgZXJyb3IudzNjU3RhdHVzID0gNDE0O1xuICAgICAgICAgICAgY29uc3QgZXhlY3V0ZUNvbW1hbmRTdHViID0gc2lub24uc3R1Yihkcml2ZXIsICdleGVjdXRlQ29tbWFuZCcpLnJldHVybnMoe1xuICAgICAgICAgICAgICBwcm90b2NvbDogJ1czQycsXG4gICAgICAgICAgICAgIGVycm9yLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCByZXF1ZXN0LnBvc3QoYCR7c2Vzc2lvblVybH0vYWN0aW9uc2AsIHtcbiAgICAgICAgICAgICAganNvbjoge1xuICAgICAgICAgICAgICAgIGFjdGlvbnM6IFsxLCAyLCAzXSxcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkuc2hvdWxkLmV2ZW50dWFsbHkuYmUucmVqZWN0ZWQ7XG4gICAgICAgICAgICBjb25zdCB7c3RhdHVzQ29kZSwgZXJyb3I6cmV0dXJuZWRFcnJvcn0gPSByZXM7XG4gICAgICAgICAgICBzdGF0dXNDb2RlLnNob3VsZC5lcXVhbCg0MTQpO1xuICAgICAgICAgICAgY29uc3Qge2Vycm9yOnczY0Vycm9yLCBtZXNzYWdlOmVyck1lc3NhZ2UsIHN0YWNrdHJhY2V9ID0gcmV0dXJuZWRFcnJvci52YWx1ZTtcbiAgICAgICAgICAgIHczY0Vycm9yLnNob3VsZC5lcXVhbCgndW5rbm93biBlcnJvcicpO1xuICAgICAgICAgICAgc3RhY2t0cmFjZS5zaG91bGQubWF0Y2goL1NvbWUgZXJyb3Igb2NjdXJyZWQvKTtcbiAgICAgICAgICAgIGVyck1lc3NhZ2Uuc2hvdWxkLmVxdWFsKCdTb21lIGVycm9yIG9jY3VycmVkJyk7XG4gICAgICAgICAgICBleGVjdXRlQ29tbWFuZFN0dWIucmVzdG9yZSgpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgaXQoJ3Nob3VsZCByZXR1cm4gZXJyb3IgaWYgYSBwcm94aWVkIHJlcXVlc3QgcmV0dXJucyBhIE1KU09OV1AgZXJyb3IgcmVzcG9uc2UgYnV0IEhUVFAgc3RhdHVzIGNvZGUgaXMgMjAwJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgYWRkSGFuZGxlcihhcHAsICdwb3N0JywgJy93ZC9odWIvc2Vzc2lvbi86c2Vzc2lvbklkL3BlcmZvcm0tYWN0aW9ucycsIChyZXEsIHJlcykgPT4ge1xuICAgICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICAgICAgICAgICAgc2Vzc2lvbklkOiAnRmFrZSBTZXNzaW9uIElkJyxcbiAgICAgICAgICAgICAgICBzdGF0dXM6IDcsXG4gICAgICAgICAgICAgICAgdmFsdWU6ICdBIHByb2JsZW0gb2NjdXJyZWQnLFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3Qge3N0YXR1c0NvZGUsIG1lc3NhZ2UsIGVycm9yfSA9IGF3YWl0IHJlcXVlc3QucG9zdChgJHtzZXNzaW9uVXJsfS9hY3Rpb25zYCwge1xuICAgICAgICAgICAgICBqc29uOiB7XG4gICAgICAgICAgICAgICAgYWN0aW9uczogWzEsIDIsIDNdLFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KS5zaG91bGQuZXZlbnR1YWxseS5iZS5yZWplY3RlZDtcbiAgICAgICAgICAgIHN0YXR1c0NvZGUuc2hvdWxkLmVxdWFsKEhUVFBTdGF0dXNDb2Rlcy5OT1RfRk9VTkQpO1xuICAgICAgICAgICAgbWVzc2FnZS5zaG91bGQubWF0Y2goL0EgcHJvYmxlbSBvY2N1cnJlZC8pO1xuICAgICAgICAgICAgY29uc3Qge2Vycm9yOnczY0Vycm9yLCBtZXNzYWdlOmVyck1lc3NhZ2UsIHN0YWNrdHJhY2V9ID0gZXJyb3IudmFsdWU7XG4gICAgICAgICAgICB3M2NFcnJvci5zaG91bGQuZXF1YWwoJ25vIHN1Y2ggZWxlbWVudCcpO1xuICAgICAgICAgICAgZXJyTWVzc2FnZS5zaG91bGQubWF0Y2goL0EgcHJvYmxlbSBvY2N1cnJlZC8pO1xuICAgICAgICAgICAgc3RhY2t0cmFjZS5zaG91bGQuZXhpc3Q7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBpdCgnc2hvdWxkIHJldHVybiBlcnJvciBpZiBhIHByb3hpZWQgcmVxdWVzdCByZXR1cm5zIGEgVzNDIGVycm9yIHJlc3BvbnNlJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgYWRkSGFuZGxlcihhcHAsICdwb3N0JywgJy93ZC9odWIvc2Vzc2lvbi86c2Vzc2lvbklkL3BlcmZvcm0tYWN0aW9ucycsIChyZXEsIHJlcykgPT4ge1xuICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwNCkuanNvbih7XG4gICAgICAgICAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICAgICAgICAgIGVycm9yOiAnbm8gc3VjaCBlbGVtZW50JyxcbiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdkb2VzIG5vdCBtYWtlIGEgZGlmZmVyZW5jZScsXG4gICAgICAgICAgICAgICAgICBzdGFja3RyYWNlOiAnYXJiaXRyYXJ5IHN0YWNrdHJhY2UnLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCB7c3RhdHVzQ29kZSwgbWVzc2FnZSwgZXJyb3J9ID0gYXdhaXQgcmVxdWVzdC5wb3N0KGAke3Nlc3Npb25Vcmx9L2FjdGlvbnNgLCB7XG4gICAgICAgICAgICAgIGpzb246IHtcbiAgICAgICAgICAgICAgICBhY3Rpb25zOiBbMSwgMiwgM10sXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pLnNob3VsZC5ldmVudHVhbGx5LmJlLnJlamVjdGVkO1xuICAgICAgICAgICAgc3RhdHVzQ29kZS5zaG91bGQuZXF1YWwoSFRUUFN0YXR1c0NvZGVzLk5PVF9GT1VORCk7XG4gICAgICAgICAgICBtZXNzYWdlLnNob3VsZC5tYXRjaCgvZG9lcyBub3QgbWFrZSBhIGRpZmZlcmVuY2UvKTtcbiAgICAgICAgICAgIGNvbnN0IHtlcnJvcjp3M2NFcnJvciwgc3RhY2t0cmFjZX0gPSBlcnJvci52YWx1ZTtcbiAgICAgICAgICAgIHczY0Vycm9yLnNob3VsZC5lcXVhbCgnbm8gc3VjaCBlbGVtZW50Jyk7XG4gICAgICAgICAgICBzdGFja3RyYWNlLnNob3VsZC5tYXRjaCgvYXJiaXRyYXJ5IHN0YWNrdHJhY2UvKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGl0KCdzaG91bGQgcmV0dXJuIGFuIGVycm9yIGlmIGEgcHJveGllZCByZXF1ZXN0IHJldHVybnMgYSBXM0MgZXJyb3IgcmVzcG9uc2UnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBhZGRIYW5kbGVyKGFwcCwgJ3Bvc3QnLCAnL3dkL2h1Yi9zZXNzaW9uLzpzZXNzaW9uSWQvcGVyZm9ybS1hY3Rpb25zJywgKHJlcSwgcmVzKSA9PiB7XG4gICAgICAgICAgICAgIHJlcy5zZXQoJ0Nvbm5lY3Rpb24nLCAnY2xvc2UnKTtcbiAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0NDQpLmpzb24oe1xuICAgICAgICAgICAgICAgIHZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICBlcnJvcjogJ2JvZ3VzIGVycm9yIGNvZGUnLFxuICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ2RvZXMgbm90IG1ha2UgYSBkaWZmZXJlbmNlJyxcbiAgICAgICAgICAgICAgICAgIHN0YWNrdHJhY2U6ICdhcmJpdHJhcnkgc3RhY2t0cmFjZScsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IHtzdGF0dXNDb2RlLCBtZXNzYWdlLCBlcnJvcn0gPSBhd2FpdCByZXF1ZXN0LnBvc3QoYCR7c2Vzc2lvblVybH0vYWN0aW9uc2AsIHtcbiAgICAgICAgICAgICAganNvbjoge1xuICAgICAgICAgICAgICAgIGFjdGlvbnM6IFsxLCAyLCAzXSxcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkuc2hvdWxkLmV2ZW50dWFsbHkuYmUucmVqZWN0ZWQ7XG4gICAgICAgICAgICBzdGF0dXNDb2RlLnNob3VsZC5lcXVhbChIVFRQU3RhdHVzQ29kZXMuSU5URVJOQUxfU0VSVkVSX0VSUk9SKTtcbiAgICAgICAgICAgIG1lc3NhZ2Uuc2hvdWxkLm1hdGNoKC9kb2VzIG5vdCBtYWtlIGEgZGlmZmVyZW5jZS8pO1xuICAgICAgICAgICAgY29uc3Qge2Vycm9yOnczY0Vycm9yLCBzdGFja3RyYWNlfSA9IGVycm9yLnZhbHVlO1xuICAgICAgICAgICAgdzNjRXJyb3Iuc2hvdWxkLmVxdWFsKCd1bmtub3duIGVycm9yJyk7XG4gICAgICAgICAgICBzdGFja3RyYWNlLnNob3VsZC5tYXRjaCgvYXJiaXRyYXJ5IHN0YWNrdHJhY2UvKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIC8vIFRlc3RzIGZvciBzcGVjaWFsIHRpbWVvdXQgY2FzZXM6IFJlZmVyIHRvIGh0dHBzOi8vZ2l0aHViLmNvbS9hcHBpdW0vYXBwaXVtL2lzc3Vlcy8xMTAxNilcbiAgICAgICAgICBkZXNjcmliZSgnL3RpbWVvdXRzIFczQyBhbmQgTUpTT05XUCBjb21wYXRpYmlsaXR5JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaXQoJ3Nob3VsZCB1c2UgYSBtZXJnZWQgL3RpbWVvdXRzIG9iamVjdCB0aGF0IGlzIFczQyBhbmQgTUpTT05XUCBjb21wYXRpYmxlJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBhZGRIYW5kbGVyKGFwcCwgJ3Bvc3QnLCAnL3dkL2h1Yi9zZXNzaW9uLzpzZXNzaW9uSWQvdGltZW91dHMnLCAocmVxLCByZXMpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB7dHlwZSwgbXMsIHNjcmlwdH0gPSByZXEuYm9keTtcbiAgICAgICAgICAgICAgICB0eXBlLnNob3VsZC5lcXVhbCgnc2NyaXB0Jyk7XG4gICAgICAgICAgICAgICAgbXMuc2hvdWxkLmVxdWFsKDEwMCk7XG4gICAgICAgICAgICAgICAgc2NyaXB0LnNob3VsZC5lcXVhbCgxMDApO1xuICAgICAgICAgICAgICAgIHJlcy5qc29uKHtcbiAgICAgICAgICAgICAgICAgIHNlc3Npb25JZDogcmVxLnBhcmFtcy5zZXNzaW9uSWQsXG4gICAgICAgICAgICAgICAgICB2YWx1ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgIHN0YXR1czogMCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIGRyaXZlci50aW1lb3V0cyA9IGFzeW5jICh0aW1lb3V0c09iaikgPT4gYXdhaXQgandwcm94eS5jb21tYW5kKCcvdGltZW91dHMnLCAnUE9TVCcsIHRpbWVvdXRzT2JqKTtcbiAgICAgICAgICAgICAgY29uc3Qge3ZhbHVlfSA9IGF3YWl0IHJlcXVlc3QucG9zdChgJHtzZXNzaW9uVXJsfS90aW1lb3V0c2AsIHtcbiAgICAgICAgICAgICAgICBqc29uOiB7XG4gICAgICAgICAgICAgICAgICBzY3JpcHQ6IDEwMCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgdmFsdWUuc2hvdWxkLmJlLnRydWU7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaXQoJ3Nob3VsZCBjYWxsIE1KU09OV1AgL3RpbWVvdXRzIG11bHRpcGxlIHRpbWVzIGlmIG11bHRpcGxlIFczQyB0aW1lb3V0IHR5cGVzIGFyZSBwYXNzZWQnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIGxldCB0aW1lb3V0c0NhbGxlZCA9IHt9O1xuICAgICAgICAgICAgICBsZXQgY2FsbHMgPSAwO1xuICAgICAgICAgICAgICBhZGRIYW5kbGVyKGFwcCwgJ3Bvc3QnLCAnL3dkL2h1Yi9zZXNzaW9uLzpzZXNzaW9uSWQvdGltZW91dHMnLCAocmVxLCByZXMpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB7dHlwZSwgbXMsIHNjcmlwdCwgcGFnZUxvYWQsIGltcGxpY2l0fSA9IHJlcS5ib2R5O1xuICAgICAgICAgICAgICAgIHRpbWVvdXRzQ2FsbGVkW3R5cGVdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjYWxscysrO1xuXG4gICAgICAgICAgICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgICAgICAgICAgICBjYXNlICdzY3JpcHQnOlxuICAgICAgICAgICAgICAgICAgICBtcy5zaG91bGQuZXF1YWwoMTAwKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICBjYXNlICdwYWdlTG9hZCc6XG4gICAgICAgICAgICAgICAgICAgIG1zLnNob3VsZC5lcXVhbCgyMDApO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgIGNhc2UgJ2ltcGxpY2l0JzpcbiAgICAgICAgICAgICAgICAgICAgbXMuc2hvdWxkLmVxdWFsKDMwMCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHR5cGUgcHJvdmlkZWQ6ICR7dHlwZX1gKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBzY3JpcHQuc2hvdWxkLmVxdWFsKDEwMCk7XG4gICAgICAgICAgICAgICAgcGFnZUxvYWQuc2hvdWxkLmVxdWFsKDIwMCk7XG4gICAgICAgICAgICAgICAgaW1wbGljaXQuc2hvdWxkLmVxdWFsKDMwMCk7XG4gICAgICAgICAgICAgICAgcmVzLmpzb24oe1xuICAgICAgICAgICAgICAgICAgc2Vzc2lvbklkOiByZXEucGFyYW1zLnNlc3Npb25JZCxcbiAgICAgICAgICAgICAgICAgIHZhbHVlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgc3RhdHVzOiAwLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgZHJpdmVyLnRpbWVvdXRzID0gYXN5bmMgKHRpbWVvdXRzT2JqKSA9PiBhd2FpdCBqd3Byb3h5LmNvbW1hbmQoJy90aW1lb3V0cycsICdQT1NUJywgdGltZW91dHNPYmopO1xuICAgICAgICAgICAgICBjb25zdCB7dmFsdWV9ID0gYXdhaXQgcmVxdWVzdC5wb3N0KGAke3Nlc3Npb25Vcmx9L3RpbWVvdXRzYCwge1xuICAgICAgICAgICAgICAgIGpzb246IHtcbiAgICAgICAgICAgICAgICAgIHNjcmlwdDogMTAwLFxuICAgICAgICAgICAgICAgICAgcGFnZUxvYWQ6IDIwMCxcbiAgICAgICAgICAgICAgICAgIGltcGxpY2l0OiAzMDAsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIHRpbWVvdXRzQ2FsbGVkLnNjcmlwdC5zaG91bGQuYmUudHJ1ZTtcbiAgICAgICAgICAgICAgdGltZW91dHNDYWxsZWQucGFnZUxvYWQuc2hvdWxkLmJlLnRydWU7XG4gICAgICAgICAgICAgIHRpbWVvdXRzQ2FsbGVkLmltcGxpY2l0LnNob3VsZC5iZS50cnVlO1xuICAgICAgICAgICAgICBjYWxscy5zaG91bGQuZXF1YWwoMyk7XG4gICAgICAgICAgICAgIHZhbHVlLnNob3VsZC5iZS50cnVlO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGl0KCdzaG91bGQgcmVqZWN0IGlmIG9uZSBvZiB0aGUgVzNDIHRpbWVvdXRzIGJlaW5nIHBhc3NlZCBpbiBmYWlscyBvbiBNSlNPTldQJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBhZGRIYW5kbGVyKGFwcCwgJ3Bvc3QnLCAnL3dkL2h1Yi9zZXNzaW9uLzpzZXNzaW9uSWQvdGltZW91dHMnLCAocmVxLCByZXMpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB7dHlwZX0gPSByZXEuYm9keTtcblxuICAgICAgICAgICAgICAgIGlmICh0eXBlID09PSAncGFnZUxvYWQnKSB7XG4gICAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICAgICAgICAgICAgICAgIHNlc3Npb25JZCxcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiA2LFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogJ0EgcHJvYmxlbSBvY2N1cnJlZCBvbiBwYWdlTG9hZCB0aW1lb3V0JyxcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICByZXMuanNvbih7XG4gICAgICAgICAgICAgICAgICAgIHNlc3Npb25JZDogcmVxLnBhcmFtcy5zZXNzaW9uSWQsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IDAsXG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBkcml2ZXIudGltZW91dHMgPSBhc3luYyAodGltZW91dHNPYmopID0+IGF3YWl0IGp3cHJveHkuY29tbWFuZCgnL3RpbWVvdXRzJywgJ1BPU1QnLCB0aW1lb3V0c09iaik7XG4gICAgICAgICAgICAgIGNvbnN0IHtzdGF0dXNDb2RlLCBtZXNzYWdlfSA9IGF3YWl0IHJlcXVlc3QucG9zdChgJHtzZXNzaW9uVXJsfS90aW1lb3V0c2AsIHtcbiAgICAgICAgICAgICAgICBqc29uOiB7XG4gICAgICAgICAgICAgICAgICBzY3JpcHQ6IDEwMCxcbiAgICAgICAgICAgICAgICAgIHBhZ2VMb2FkOiAyMDAsXG4gICAgICAgICAgICAgICAgICBpbXBsaWNpdDogMzAwLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIH0pLnNob3VsZC5ldmVudHVhbGx5LmJlLnJlamVjdGVkO1xuICAgICAgICAgICAgICBzdGF0dXNDb2RlLnNob3VsZC5lcXVhbChIVFRQU3RhdHVzQ29kZXMuTk9UX0ZPVU5EKTtcbiAgICAgICAgICAgICAgbWVzc2FnZS5zaG91bGQubWF0Y2goL0EgcHJvYmxlbSBvY2N1cnJlZC8pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBjb21tYW5kcyB3aXRoIG5vIHJlc3BvbnNlIHZhbHVlcycsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGxldCByZXMgPSBhd2FpdCByZXF1ZXN0KHtcbiAgICAgICAgdXJsOiBgJHtiYXNlVXJsfS9zZXNzaW9uL2Zvby9mb3J3YXJkYCxcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGpzb246IHRydWUsXG4gICAgICB9KTtcbiAgICAgIHJlcy5zaG91bGQuZXFsKHtcbiAgICAgICAgc3RhdHVzOiAwLFxuICAgICAgICB2YWx1ZTogbnVsbCxcbiAgICAgICAgc2Vzc2lvbklkOiBcImZvb1wiXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgYWxsb3cgZW1wdHkgc3RyaW5nIHJlc3BvbnNlIHZhbHVlcycsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGxldCByZXMgPSBhd2FpdCByZXF1ZXN0KHtcbiAgICAgICAgdXJsOiBgJHtiYXNlVXJsfS9zZXNzaW9uL2Zvby9lbGVtZW50L2Jhci90ZXh0YCxcbiAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAganNvbjogdHJ1ZSxcbiAgICAgIH0pO1xuICAgICAgcmVzLnNob3VsZC5lcWwoe1xuICAgICAgICBzdGF0dXM6IDAsXG4gICAgICAgIHZhbHVlOiBcIlwiLFxuICAgICAgICBzZXNzaW9uSWQ6IFwiZm9vXCJcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBzZW5kIDUwMCByZXNwb25zZSBhbmQgYW4gVW5rbm93biBvYmplY3QgZm9yIHJlamVjdGVkIGNvbW1hbmRzJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgbGV0IHJlcyA9IGF3YWl0IHJlcXVlc3Qoe1xuICAgICAgICB1cmw6IGAke2Jhc2VVcmx9L3Nlc3Npb24vZm9vL3JlZnJlc2hgLFxuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAganNvbjogdHJ1ZSxcbiAgICAgICAgcmVzb2x2ZVdpdGhGdWxsUmVzcG9uc2U6IHRydWUsXG4gICAgICAgIHNpbXBsZTogZmFsc2VcbiAgICAgIH0pO1xuXG4gICAgICByZXMuc3RhdHVzQ29kZS5zaG91bGQuZXF1YWwoNTAwKTtcbiAgICAgIHJlcy5ib2R5LnNob3VsZC5lcWwoe1xuICAgICAgICBzdGF0dXM6IDEzLFxuICAgICAgICB2YWx1ZToge1xuICAgICAgICAgIG1lc3NhZ2U6ICdBbiB1bmtub3duIHNlcnZlci1zaWRlIGVycm9yIG9jY3VycmVkIHdoaWxlIHByb2Nlc3NpbmcgJyArXG4gICAgICAgICAgICAgICAgICAgJ3RoZSBjb21tYW5kLiBPcmlnaW5hbCBlcnJvcjogVG9vIEZyZXNoISdcbiAgICAgICAgfSxcbiAgICAgICAgc2Vzc2lvbklkOiBcImZvb1wiXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgbm90IHRocm93IFVua25vd25FcnJvciB3aGVuIGtub3duJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgbGV0IHJlcyA9IGF3YWl0IHJlcXVlc3Qoe1xuICAgICAgICB1cmw6IGAke2Jhc2VVcmx9L3Nlc3Npb24vZm9vYCxcbiAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAganNvbjogdHJ1ZSxcbiAgICAgICAgcmVzb2x2ZVdpdGhGdWxsUmVzcG9uc2U6IHRydWUsXG4gICAgICAgIHNpbXBsZTogZmFsc2VcbiAgICAgIH0pO1xuXG4gICAgICByZXMuc3RhdHVzQ29kZS5zaG91bGQuZXF1YWwoNDA0KTtcbiAgICAgIHJlcy5ib2R5LnNob3VsZC5lcWwoe1xuICAgICAgICBzdGF0dXM6IDYsXG4gICAgICAgIHZhbHVlOiB7XG4gICAgICAgICAgbWVzc2FnZTogJ0Egc2Vzc2lvbiBpcyBlaXRoZXIgdGVybWluYXRlZCBvciBub3Qgc3RhcnRlZCdcbiAgICAgICAgfSxcbiAgICAgICAgc2Vzc2lvbklkOiBcImZvb1wiXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3Nlc3Npb24gSWRzJywgZnVuY3Rpb24gKCkge1xuICAgIGxldCBkcml2ZXIgPSBuZXcgRmFrZURyaXZlcigpO1xuICAgIGxldCBtanNvbndwU2VydmVyO1xuXG4gICAgYmVmb3JlKGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIG1qc29ud3BTZXJ2ZXIgPSBhd2FpdCBzZXJ2ZXIocm91dGVDb25maWd1cmluZ0Z1bmN0aW9uKGRyaXZlciksIHNlcnZlclBvcnQpO1xuICAgIH0pO1xuXG4gICAgYWZ0ZXIoYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgYXdhaXQgbWpzb253cFNlcnZlci5jbG9zZSgpO1xuICAgIH0pO1xuXG4gICAgYWZ0ZXJFYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgIGRyaXZlci5zZXNzaW9uSWQgPSBudWxsO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gbnVsbCBTZXNzaW9uSWQgZm9yIGNvbW1hbmRzIHdpdGhvdXQgc2Vzc2lvbklkcycsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGxldCByZXMgPSBhd2FpdCByZXF1ZXN0KHtcbiAgICAgICAgdXJsOiBgJHtiYXNlVXJsfS9zdGF0dXNgLFxuICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICBqc29uOiB0cnVlLFxuICAgICAgfSk7XG5cbiAgICAgIHNob3VsZC5lcXVhbChyZXMuc2Vzc2lvbklkLCBudWxsKTtcbiAgICB9KTtcblxuICAgIGl0KCdyZXNwb25kcyB3aXRoIHRoZSBzYW1lIHNlc3Npb24gSUQgaW4gdGhlIHJlcXVlc3QnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBsZXQgc2Vzc2lvbklkID0gJ1ZhZGVyIFNlc3Npb25zJztcbiAgICAgIGRyaXZlci5zZXNzaW9uSWQgPSBzZXNzaW9uSWQ7XG5cbiAgICAgIGxldCByZXMgPSBhd2FpdCByZXF1ZXN0KHtcbiAgICAgICAgdXJsOiBgJHtiYXNlVXJsfS9zZXNzaW9uLyR7c2Vzc2lvbklkfS91cmxgLFxuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAganNvbjoge3VybDogJ2h0dHA6Ly9nb29nbGUuY29tJ31cbiAgICAgIH0pO1xuXG4gICAgICBzaG91bGQuZXhpc3QocmVzLnNlc3Npb25JZCk7XG4gICAgICByZXMuc2Vzc2lvbklkLnNob3VsZC5lcWwoc2Vzc2lvbklkKTtcbiAgICB9KTtcblxuICAgIGl0KCd5ZWxscyBpZiBubyBzZXNzaW9uIGV4aXN0cycsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGxldCBzZXNzaW9uSWQgPSAnVmFkZXIgU2Vzc2lvbnMnO1xuXG4gICAgICBsZXQgcmVzID0gYXdhaXQgcmVxdWVzdCh7XG4gICAgICAgIHVybDogYCR7YmFzZVVybH0vc2Vzc2lvbi8ke3Nlc3Npb25JZH0vdXJsYCxcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGpzb246IHt1cmw6ICdodHRwOi8vZ29vZ2xlLmNvbSd9LFxuICAgICAgICByZXNvbHZlV2l0aEZ1bGxSZXNwb25zZTogdHJ1ZSxcbiAgICAgICAgc2ltcGxlOiBmYWxzZVxuICAgICAgfSk7XG5cbiAgICAgIHJlcy5zdGF0dXNDb2RlLnNob3VsZC5lcXVhbCg0MDQpO1xuICAgICAgcmVzLmJvZHkuc3RhdHVzLnNob3VsZC5lcXVhbCg2KTtcbiAgICAgIHJlcy5ib2R5LnZhbHVlLm1lc3NhZ2Uuc2hvdWxkLmNvbnRhaW4oJ3Nlc3Npb24nKTtcbiAgICB9KTtcblxuICAgIGl0KCd5ZWxscyBpZiBpbnZhbGlkIHNlc3Npb24gaXMgc2VudCcsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGxldCBzZXNzaW9uSWQgPSAnVmFkZXIgU2Vzc2lvbnMnO1xuICAgICAgZHJpdmVyLnNlc3Npb25JZCA9ICdyZWNlc3Npb24nO1xuXG4gICAgICBsZXQgcmVzID0gYXdhaXQgcmVxdWVzdCh7XG4gICAgICAgIHVybDogYCR7YmFzZVVybH0vc2Vzc2lvbi8ke3Nlc3Npb25JZH0vdXJsYCxcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGpzb246IHt1cmw6ICdodHRwOi8vZ29vZ2xlLmNvbSd9LFxuICAgICAgICByZXNvbHZlV2l0aEZ1bGxSZXNwb25zZTogdHJ1ZSxcbiAgICAgICAgc2ltcGxlOiBmYWxzZVxuICAgICAgfSk7XG5cbiAgICAgIHJlcy5zdGF0dXNDb2RlLnNob3VsZC5lcXVhbCg0MDQpO1xuICAgICAgcmVzLmJvZHkuc3RhdHVzLnNob3VsZC5lcXVhbCg2KTtcbiAgICAgIHJlcy5ib2R5LnZhbHVlLm1lc3NhZ2Uuc2hvdWxkLmNvbnRhaW4oJ3Nlc3Npb24nKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGF2ZSBzZXNzaW9uIElEcyBpbiBlcnJvciByZXNwb25zZXMnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBsZXQgc2Vzc2lvbklkID0gJ1ZhZGVyIFNlc3Npb25zJztcbiAgICAgIGRyaXZlci5zZXNzaW9uSWQgPSBzZXNzaW9uSWQ7XG5cbiAgICAgIGxldCByZXMgPSBhd2FpdCByZXF1ZXN0KHtcbiAgICAgICAgdXJsOiBgJHtiYXNlVXJsfS9zZXNzaW9uLyR7c2Vzc2lvbklkfS9yZWZyZXNoYCxcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGpzb246IHRydWUsXG4gICAgICAgIHJlc29sdmVXaXRoRnVsbFJlc3BvbnNlOiB0cnVlLFxuICAgICAgICBzaW1wbGU6IGZhbHNlXG4gICAgICB9KTtcblxuICAgICAgcmVzLnN0YXR1c0NvZGUuc2hvdWxkLmVxdWFsKDUwMCk7XG4gICAgICByZXMuYm9keS5zaG91bGQuZXFsKHtcbiAgICAgICAgc3RhdHVzOiAxMyxcbiAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICBtZXNzYWdlOiAnQW4gdW5rbm93biBzZXJ2ZXItc2lkZSBlcnJvciBvY2N1cnJlZCB3aGlsZSBwcm9jZXNzaW5nICcgK1xuICAgICAgICAgICAgICAgICAgICd0aGUgY29tbWFuZC4gT3JpZ2luYWwgZXJyb3I6IFRvbyBGcmVzaCEnXG4gICAgICAgIH0sXG4gICAgICAgIHNlc3Npb25JZFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBhIG5ldyBzZXNzaW9uIElEIG9uIGNyZWF0ZScsIGFzeW5jIGZ1bmN0aW9uICgpIHtcblxuICAgICAgbGV0IHJlcyA9IGF3YWl0IHJlcXVlc3Qoe1xuICAgICAgICB1cmw6IGAke2Jhc2VVcmx9L3Nlc3Npb25gLFxuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAganNvbjoge2Rlc2lyZWRDYXBhYmlsaXRpZXM6IHtncmVldGluZzogJ2hlbGxvJ30sIHJlcXVpcmVkQ2FwYWJpbGl0aWVzOiB7dmFsZWRpY3Rpb246ICdieWUnfX1cbiAgICAgIH0pO1xuXG4gICAgICBzaG91bGQuZXhpc3QocmVzLnNlc3Npb25JZCk7XG4gICAgICByZXMuc2Vzc2lvbklkLnNob3VsZC5lcXVhbCgnMTIzNCcpO1xuICAgICAgcmVzLnZhbHVlLnNob3VsZC5lcWwoe2dyZWV0aW5nOiAnaGVsbG8nLCB2YWxlZGljdGlvbjogJ2J5ZSd9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3ZpYSBkcml2ZXJzIGpzb253cCBwcm94eScsIGZ1bmN0aW9uICgpIHtcbiAgICBsZXQgZHJpdmVyO1xuICAgIGxldCBzZXNzaW9uSWQgPSAnZm9vJztcbiAgICBsZXQgbWpzb253cFNlcnZlcjtcblxuICAgIGJlZm9yZUVhY2goYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgZHJpdmVyID0gbmV3IEZha2VEcml2ZXIoKTtcbiAgICAgIGRyaXZlci5zZXNzaW9uSWQgPSBzZXNzaW9uSWQ7XG4gICAgICBkcml2ZXIucHJveHlBY3RpdmUgPSAoKSA9PiB7IHJldHVybiB0cnVlOyB9O1xuICAgICAgZHJpdmVyLmNhblByb3h5ID0gKCkgPT4geyByZXR1cm4gdHJ1ZTsgfTtcblxuICAgICAgbWpzb253cFNlcnZlciA9IGF3YWl0IHNlcnZlcihyb3V0ZUNvbmZpZ3VyaW5nRnVuY3Rpb24oZHJpdmVyKSwgc2VydmVyUG9ydCk7XG4gICAgfSk7XG5cbiAgICBhZnRlckVhY2goYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgYXdhaXQgbWpzb253cFNlcnZlci5jbG9zZSgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBnaXZlIGEgbmljZSBlcnJvciBpZiBwcm94eWluZyBpcyBzZXQgYnV0IG5vIHByb3h5IGZ1bmN0aW9uIGV4aXN0cycsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGRyaXZlci5jYW5Qcm94eSA9ICgpID0+IHsgcmV0dXJuIGZhbHNlOyB9O1xuICAgICAgbGV0IHJlcyA9IGF3YWl0IHJlcXVlc3Qoe1xuICAgICAgICB1cmw6IGAke2Jhc2VVcmx9L3Nlc3Npb24vJHtzZXNzaW9uSWR9L3VybGAsXG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBqc29uOiB7dXJsOiAnaHR0cDovL2dvb2dsZS5jb20nfSxcbiAgICAgICAgcmVzb2x2ZVdpdGhGdWxsUmVzcG9uc2U6IHRydWUsXG4gICAgICAgIHNpbXBsZTogZmFsc2VcbiAgICAgIH0pO1xuXG4gICAgICByZXMuc3RhdHVzQ29kZS5zaG91bGQuZXF1YWwoNTAwKTtcbiAgICAgIHJlcy5ib2R5LnNob3VsZC5lcWwoe1xuICAgICAgICBzdGF0dXM6IDEzLFxuICAgICAgICB2YWx1ZToge1xuICAgICAgICAgIG1lc3NhZ2U6ICdBbiB1bmtub3duIHNlcnZlci1zaWRlIGVycm9yIG9jY3VycmVkIHdoaWxlIHByb2Nlc3NpbmcgJyArXG4gICAgICAgICAgICAgICAgICAgJ3RoZSBjb21tYW5kLiBPcmlnaW5hbCBlcnJvcjogVHJ5aW5nIHRvIHByb3h5IHRvIGEgSlNPTldQICcgK1xuICAgICAgICAgICAgICAgICAgICdzZXJ2ZXIgYnV0IGRyaXZlciBpcyB1bmFibGUgdG8gcHJveHknXG4gICAgICAgIH0sXG4gICAgICAgIHNlc3Npb25JZFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHBhc3Mgb24gYW55IGVycm9ycyBpbiBwcm94eWluZycsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGRyaXZlci5wcm94eVJlcVJlcyA9IGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiZm9vXCIpO1xuICAgICAgfTtcbiAgICAgIGxldCByZXMgPSBhd2FpdCByZXF1ZXN0KHtcbiAgICAgICAgdXJsOiBgJHtiYXNlVXJsfS9zZXNzaW9uLyR7c2Vzc2lvbklkfS91cmxgLFxuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAganNvbjoge3VybDogJ2h0dHA6Ly9nb29nbGUuY29tJ30sXG4gICAgICAgIHJlc29sdmVXaXRoRnVsbFJlc3BvbnNlOiB0cnVlLFxuICAgICAgICBzaW1wbGU6IGZhbHNlXG4gICAgICB9KTtcblxuICAgICAgcmVzLnN0YXR1c0NvZGUuc2hvdWxkLmVxdWFsKDUwMCk7XG4gICAgICByZXMuYm9keS5zaG91bGQuZXFsKHtcbiAgICAgICAgc3RhdHVzOiAxMyxcbiAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICBtZXNzYWdlOiAnQW4gdW5rbm93biBzZXJ2ZXItc2lkZSBlcnJvciBvY2N1cnJlZCB3aGlsZSBwcm9jZXNzaW5nICcgK1xuICAgICAgICAgICAgICAgICAgICd0aGUgY29tbWFuZC4gT3JpZ2luYWwgZXJyb3I6IENvdWxkIG5vdCBwcm94eS4gUHJveHkgJyArXG4gICAgICAgICAgICAgICAgICAgJ2Vycm9yOiBmb28nXG4gICAgICAgIH0sXG4gICAgICAgIHNlc3Npb25JZFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGFibGUgdG8gdGhyb3cgUHJveHlSZXF1ZXN0RXJyb3IgaW4gcHJveHlpbmcnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBkcml2ZXIucHJveHlSZXFSZXMgPSBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGxldCBqc29ud3AgPSB7c3RhdHVzOiAzNSwgdmFsdWU6IFwiTm8gc3VjaCBjb250ZXh0IGZvdW5kLlwiLCBzZXNzaW9uSWQ6IFwiZm9vXCJ9O1xuICAgICAgICB0aHJvdyAgbmV3IGVycm9ycy5Qcm94eVJlcXVlc3RFcnJvcihgQ291bGQgbm90IHByb3h5IGNvbW1hbmQgdG8gcmVtb3RlIHNlcnZlci4gYCwganNvbndwKTtcbiAgICAgIH07XG4gICAgICBsZXQgcmVzID0gYXdhaXQgcmVxdWVzdCh7XG4gICAgICAgIHVybDogYCR7YmFzZVVybH0vc2Vzc2lvbi8ke3Nlc3Npb25JZH0vdXJsYCxcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGpzb246IHt1cmw6ICdodHRwOi8vZ29vZ2xlLmNvbSd9LFxuICAgICAgICByZXNvbHZlV2l0aEZ1bGxSZXNwb25zZTogdHJ1ZSxcbiAgICAgICAgc2ltcGxlOiBmYWxzZVxuICAgICAgfSk7XG5cbiAgICAgIHJlcy5zdGF0dXNDb2RlLnNob3VsZC5lcXVhbCg1MDApO1xuICAgICAgcmVzLmJvZHkuc2hvdWxkLmVxbCh7XG4gICAgICAgIHN0YXR1czogMzUsXG4gICAgICAgIFwidmFsdWVcIjogeyBcIm1lc3NhZ2VcIjogXCJObyBzdWNoIGNvbnRleHQgZm91bmQuXCJ9LFxuICAgICAgICBzZXNzaW9uSWQ6IFwiZm9vXCJcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBsZXQgdGhlIHByb3h5IGhhbmRsZSByZXEvcmVzJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgZHJpdmVyLnByb3h5UmVxUmVzID0gYXN5bmMgZnVuY3Rpb24gKHJlcSwgcmVzKSB7XG4gICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtjdXN0b206ICdkYXRhJ30pO1xuICAgICAgfTtcbiAgICAgIGxldCByZXMgPSBhd2FpdCByZXF1ZXN0KHtcbiAgICAgICAgdXJsOiBgJHtiYXNlVXJsfS9zZXNzaW9uLyR7c2Vzc2lvbklkfS91cmxgLFxuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAganNvbjoge3VybDogJ2h0dHA6Ly9nb29nbGUuY29tJ30sXG4gICAgICAgIHJlc29sdmVXaXRoRnVsbFJlc3BvbnNlOiB0cnVlLFxuICAgICAgICBzaW1wbGU6IGZhbHNlXG4gICAgICB9KTtcblxuICAgICAgcmVzLnN0YXR1c0NvZGUuc2hvdWxkLmVxdWFsKDIwMCk7XG4gICAgICByZXMuYm9keS5zaG91bGQuZXFsKHtjdXN0b206ICdkYXRhJ30pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBhdm9pZCBqc29ud3AgcHJveHlpbmcgd2hlbiBwYXRoIG1hdGNoZXMgYXZvaWRhbmNlIGxpc3QnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBkcml2ZXIuZ2V0UHJveHlBdm9pZExpc3QgPSAoKSA9PiB7IHJldHVybiBbWydQT1NUJywgbmV3IFJlZ0V4cCgnXi9zZXNzaW9uL1teL10rL3VybCQnKV1dOyB9O1xuICAgICAgbGV0IHJlcyA9IGF3YWl0IHJlcXVlc3Qoe1xuICAgICAgICB1cmw6IGAke2Jhc2VVcmx9L3Nlc3Npb24vJHtzZXNzaW9uSWR9L3VybGAsXG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBqc29uOiB7dXJsOiAnaHR0cDovL2dvb2dsZS5jb20nfSxcbiAgICAgICAgcmVzb2x2ZVdpdGhGdWxsUmVzcG9uc2U6IHRydWUsXG4gICAgICAgIHNpbXBsZTogZmFsc2VcbiAgICAgIH0pO1xuXG4gICAgICByZXMuc3RhdHVzQ29kZS5zaG91bGQuZXF1YWwoMjAwKTtcbiAgICAgIHJlcy5ib2R5LnNob3VsZC5lcWwoe1xuICAgICAgICBzdGF0dXM6IDAsXG4gICAgICAgIHZhbHVlOiBcIk5hdmlnYXRlZCB0bzogaHR0cDovL2dvb2dsZS5jb21cIixcbiAgICAgICAgc2Vzc2lvbklkXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZmFpbCBpZiBhdm9pZCBwcm94eSBsaXN0IGlzIG1hbGZvcm1lZCBpbiBzb21lIHdheScsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGFzeW5jIGZ1bmN0aW9uIGJhZFByb3h5QXZvaWRhbmNlTGlzdCAobGlzdCkge1xuICAgICAgICBkcml2ZXIuZ2V0UHJveHlBdm9pZExpc3QgPSAoKSA9PiB7IHJldHVybiBsaXN0OyB9O1xuICAgICAgICBsZXQgcmVzID0gYXdhaXQgcmVxdWVzdCh7XG4gICAgICAgICAgdXJsOiBgJHtiYXNlVXJsfS9zZXNzaW9uLyR7c2Vzc2lvbklkfS91cmxgLFxuICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgIGpzb246IHt1cmw6ICdodHRwOi8vZ29vZ2xlLmNvbSd9LFxuICAgICAgICAgIHJlc29sdmVXaXRoRnVsbFJlc3BvbnNlOiB0cnVlLFxuICAgICAgICAgIHNpbXBsZTogZmFsc2VcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmVzLnN0YXR1c0NvZGUuc2hvdWxkLmVxdWFsKDUwMCk7XG4gICAgICAgIHJlcy5ib2R5LnN0YXR1cy5zaG91bGQuZXF1YWwoMTMpO1xuICAgICAgICByZXMuYm9keS52YWx1ZS5tZXNzYWdlLnNob3VsZC5jb250YWluKFwicm94eVwiKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGxpc3RzID0gW1xuICAgICAgICAnZm9vJyxcbiAgICAgICAgW1snZm9vJ11dLFxuICAgICAgICBbWydCQVInLCAvbG9sL11dLFxuICAgICAgICBbWydHRVQnLCAnZm9vJ11dXG4gICAgICBdO1xuICAgICAgZm9yIChsZXQgbGlzdCBvZiBsaXN0cykge1xuICAgICAgICBhd2FpdCBiYWRQcm94eUF2b2lkYW5jZUxpc3QobGlzdCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGF2b2lkIHByb3h5aW5nIG5vbi1zZXNzaW9uIGNvbW1hbmRzIGV2ZW4gaWYgbm90IGluIHRoZSBsaXN0JywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgZHJpdmVyLmdldFByb3h5QXZvaWRMaXN0ID0gKCkgPT4geyByZXR1cm4gW1snUE9TVCcsIG5ldyBSZWdFeHAoJycpXV07IH07XG5cbiAgICAgIGxldCByZXMgPSBhd2FpdCByZXF1ZXN0KHtcbiAgICAgICAgdXJsOiBgJHtiYXNlVXJsfS9zdGF0dXNgLFxuICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICBqc29uOiB0cnVlLFxuICAgICAgICByZXNvbHZlV2l0aEZ1bGxSZXNwb25zZTogdHJ1ZSxcbiAgICAgICAgc2ltcGxlOiBmYWxzZVxuICAgICAgfSk7XG5cbiAgICAgIHJlcy5zdGF0dXNDb2RlLnNob3VsZC5lcXVhbCgyMDApO1xuICAgICAgcmVzLmJvZHkuc2hvdWxkLmVxbCh7XG4gICAgICAgIHN0YXR1czogMCxcbiAgICAgICAgdmFsdWU6IFwiSSdtIGZpbmVcIixcbiAgICAgICAgc2Vzc2lvbklkOiBudWxsXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgYXZvaWQgcHJveHlpbmcgZGVsZXRlU2Vzc2lvbiBjb21tYW5kcycsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGRyaXZlci5nZXRQcm94eUF2b2lkTGlzdCA9ICgpID0+IHsgcmV0dXJuIFtbJ1BPU1QnLCBuZXcgUmVnRXhwKCcnKV1dOyB9O1xuXG4gICAgICBkcml2ZXIuc2Vzc2lvbklkLnNob3VsZC5lcXVhbChzZXNzaW9uSWQpO1xuICAgICAgbGV0IHJlcyA9IGF3YWl0IHJlcXVlc3Qoe1xuICAgICAgICB1cmw6IGAke2Jhc2VVcmx9L3Nlc3Npb24vJHtzZXNzaW9uSWR9YCxcbiAgICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICAgICAganNvbjogdHJ1ZSxcbiAgICAgICAgcmVzb2x2ZVdpdGhGdWxsUmVzcG9uc2U6IHRydWUsXG4gICAgICAgIHNpbXBsZTogZmFsc2VcbiAgICAgIH0pO1xuXG4gICAgICByZXMuc3RhdHVzQ29kZS5zaG91bGQuZXF1YWwoMjAwKTtcbiAgICAgIHNob3VsZC5ub3QuZXhpc3QoZHJpdmVyLnNlc3Npb25JZCk7XG4gICAgICBkcml2ZXIuandwUHJveHlBY3RpdmUuc2hvdWxkLmJlLmZhbHNlO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sInNvdXJjZVJvb3QiOiIuLi8uLi8uLiJ9
